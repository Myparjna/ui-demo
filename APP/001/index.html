<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>智慧园区 - 首页</title>
    
    <!-- 引入Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com/"></script>
    
    <!-- 引入Remix Icon图标库 -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css" rel="stylesheet" />
    
    <!-- 引入Framer Motion动效库 -->
    <script src="https://cdn.jsdelivr.net/npm/framer-motion@11.2.10/dist/framer-motion.umd.min.js"></script>

    <style>
        /* 引入阿里巴巴普惠体3.0 */
        @font-face {
            font-family: 'AlibabaPuHuiTi';
            src: url('https://cdn.jsdelivr.net/npm/alibabapuhuiti-3-45-light@1.0.0/AlibabaPuHuiTi-3-45-Light.woff2') format('woff2');
            font-weight: 300;
        }
        @font-face {
            font-family: 'AlibabaPuHuiTi';
            src: url('https://cdn.jsdelivr.net/npm/alibabapuhuiti-3-55-regular@1.0.0/AlibabaPuHuiTi-3-55-Regular.woff2') format('woff2');
            font-weight: 400;
        }
        @font-face {
            font-family: 'AlibabaPuHuiTi';
            src: url('https://cdn.jsdelivr.net/npm/alibabapuhuiti-3-65-medium@1.0.0/AlibabaPuHuiTi-3-65-Medium.woff2') format('woff2');
            font-weight: 500;
        }
        @font-face {
            font-family: 'AlibabaPuHuiTi';
            src: url('https://cdn.jsdelivr.net/npm/alibabapuhuiti-3-75-semibold@1.0.0/AlibabaPuHuiTi-3-75-SemiBold.woff2') format('woff2');
            font-weight: 600;
        }
        @font-face {
            font-family: 'AlibabaPuHuiTi';
            src: url('https://cdn.jsdelivr.net/npm/alibabapuhuiti-3-85-bold@1.0.0/AlibabaPuHuiTi-3-85-Bold.woff2') format('woff2');
            font-weight: 700;
        }

        /* 自定义Tailwind配置 */
        .font-sans {
            font-family: 'AlibabaPuHuiTi', sans-serif;
        }
        
        /* 隐藏滚动条 */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* 弹窗过渡效果 */
        .modal-enter {
            opacity: 0;
            transform: translateY(-20px) scale(0.95);
        }
        .modal-enter-active {
            opacity: 1;
            transform: translateY(0) scale(1);
            transition: opacity 300ms, transform 300ms;
        }
        .modal-exit {
            opacity: 1;
            transform: translateY(0) scale(1);
        }
        .modal-exit-active {
            opacity: 0;
            transform: translateY(-20px) scale(0.95);
            transition: opacity 300ms, transform 300ms;
        }
        .backdrop-enter { opacity: 0; }
        .backdrop-enter-active { opacity: 1; transition: opacity 300ms; }
        .backdrop-exit { opacity: 1; }
        .backdrop-exit-active { opacity: 0; transition: opacity 300ms; }

    </style>
</head>

<body class="bg-zinc-900 flex justify-center items-start font-sans">
    
    <!-- 模拟手机屏幕 -->
    <div id="app-container" class="relative w-full max-w-[420px] h-screen bg-zinc-50 overflow-y-auto no-scrollbar">

        <!-- 主内容区域 -->
        <main class="p-4 pb-24">
            
            <!-- 头部：天气和位置 -->
            <div id="header" class="flex justify-between items-center mb-4">
                <div id="location-switcher" class="flex items-center gap-1 cursor-pointer group">
                    <i class="ri-map-pin-2-fill text-lg text-zinc-800"></i>
                    <span id="current-location" class="font-semibold text-zinc-800">宁波御景湾</span>
                    <i class="ri-arrow-down-s-line text-lg text-zinc-500 group-hover:text-zinc-800 transition-colors"></i>
                </div>
                <div class="flex items-center gap-2 bg-white/60 backdrop-blur-sm px-3 py-1.5 rounded-full border border-zinc-100">
                    <i class="ri-sun-cloudy-line text-xl text-yellow-500"></i>
                    <span class="font-medium text-sm text-zinc-700">多云 15°</span>
                </div>
            </div>

            <!-- 主看板 -->
             <div id="main-dashboard" class="bg-white p-5 rounded-2xl shadow-[0_8px_30px_rgba(0,0,0,0.05)] mb-6">
                <div class="flex justify-between items-start mb-5">
                    <div>
                        <p class="text-sm text-zinc-500 mb-1">电费余额 (元)</p>
                        <p class="text-3xl font-bold text-zinc-900">66.60</p>
                    </div>
                    <a href="bill-list.html" class="bg-zinc-800 text-white text-sm font-medium px-4 py-2 rounded-lg hover:bg-zinc-700 active:scale-95 transition-all">
                        去充值
                    </a>
                </div>
                <div class="grid grid-cols-3 gap-4 text-center">
                    <div><p class="text-sm text-zinc-500">昨日电量</p><p class="font-semibold text-zinc-800 text-lg">42.66 <span class="text-xs">kWh</span></p></div>
                    <div><p class="text-sm text-zinc-500">今日电量</p><p class="font-semibold text-zinc-800 text-lg">12.66 <span class="text-xs">kWh</span></p></div>
                    <div><p class="text-sm text-zinc-500">今日电费</p><p class="font-semibold text-zinc-800 text-lg">26.60 <span class="text-xs">元</span></p></div>
                </div>
                <div class="h-px bg-zinc-200 my-5"></div>
                <div class="grid grid-cols-3 gap-4 text-center">
                    <div><p class="text-sm text-zinc-500">当前租期</p><p class="font-semibold text-zinc-800">第二期</p></div>
                    <div><p class="text-sm text-zinc-500">下期付款</p><p class="font-semibold text-zinc-800">2025.09.01</p></div>
                    <div><p class="text-sm text-zinc-500">剩余天数</p><p class="font-semibold text-zinc-800">24 <span class="text-xs">天</span></p></div>
                </div>
            </div>
            
            <!-- 快捷入口 -->
            <div id="quick-actions" class="grid grid-cols-4 gap-4 mb-6">
                <a href="water-service.html" class="flex flex-col items-center justify-center gap-2 bg-white p-3 rounded-2xl shadow-[0_4px_16px_rgba(0,0,0,0.04)] aspect-square hover:scale-105 active:scale-100 transition-transform"><div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center"><i class="ri-drinks-2-line text-xl text-blue-600"></i></div><p class="text-xs font-medium text-zinc-700">送水上门</p></a>
                <a href="bill-list.html" class="flex flex-col items-center justify-center gap-2 bg-white p-3 rounded-2xl shadow-[0_4px_16px_rgba(0,0,0,0.04)] aspect-square hover:scale-105 active:scale-100 transition-transform"><div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center"><i class="ri-wallet-3-line text-xl text-green-600"></i></div><p class="text-xs font-medium text-zinc-700">费用缴纳</p></a>
                <a href="stranger-alert-list.html" class="flex flex-col items-center justify-center gap-2 bg-white p-3 rounded-2xl shadow-[0_4px_16px_rgba(0,0,0,0.04)] aspect-square hover:scale-105 active:scale-100 transition-transform"><div class="w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center"><i class="ri-user-unfollow-line text-xl text-orange-600"></i></div><p class="text-xs font-medium text-zinc-700">陌生人预警</p></a>
                <a href="visitor-management.html" class="flex flex-col items-center justify-center gap-2 bg-white p-3 rounded-2xl shadow-[0_4px_16px_rgba(0,0,0,0.04)] aspect-square hover:scale-105 active:scale-100 transition-transform"><div class="w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center"><i class="ri-customer-service-2-line text-xl text-purple-600"></i></div><p class="text-xs font-medium text-zinc-700">访客管理</p></a>
            </div>

            <!-- 智慧空间 & 报事报修 -->
            <div id="smart-services" class="grid grid-cols-2 gap-4 mb-6">
                <a href="space-control-main.html" class="bg-zinc-800 text-white p-4 rounded-2xl flex items-center justify-between hover:bg-zinc-700 active:scale-95 transition-all"><div><p class="font-bold text-base">智慧空间</p><p class="text-xs text-zinc-400">远程控制设备</p></div><i class="ri-robot-2-fill text-3xl"></i></a>
                <a href="repair-request.html" class="bg-white p-4 rounded-2xl flex items-center justify-between border border-zinc-200 hover:bg-zinc-100 active:scale-95 transition-all"><div><p class="font-bold text-base text-zinc-800">报事报修</p><p class="text-xs text-zinc-500">一键快速响应</p></div><i class="ri-tools-fill text-3xl text-zinc-800"></i></a>
            </div>

            <!-- 新闻资讯 -->
            <div id="news-section">
                <div class="flex justify-between items-center mb-4"><h2 class="text-lg font-bold text-zinc-900">新闻资讯</h2><a href="#" class="text-sm font-medium text-zinc-500 hover:text-zinc-800 transition-colors">查看全部 <i class="ri-arrow-right-s-line align-middle"></i></a></div>
                <div class="space-y-4">
                    <a href="news-details.html" class="flex items-center gap-4 bg-white p-3 rounded-2xl shadow-[0_4px_16px_rgba(0,0,0,0.04)]"><img src="https://images.pexels.com/photos/3184339/pexels-photo-3184339.jpeg?auto=compress&cs=tinysrgb&w=400" alt="News Image 1" class="w-24 h-24 object-cover rounded-xl"><div class="flex flex-col justify-between self-stretch py-1"><div><h3 class="font-bold text-zinc-800 leading-tight mb-2">先行区中科经济产业园，冬日建设不停歇</h3></div><div class="flex items-center text-xs text-zinc-400 gap-4"><span><i class="ri-building-4-line mr-1"></i>物业管理处</span><span>2025-06-28</span></div></div></a>
                    <a href="news-details.html" class="flex items-center gap-4 bg-white p-3 rounded-2xl shadow-[0_4px_16px_rgba(0,0,0,0.04)]"><img src="https://images.pexels.com/photos/2422290/pexels-photo-2422290.jpeg?auto=compress&cs=tinysrgb&w=400" alt="News Image 2" class="w-24 h-24 object-cover rounded-xl"><div class="flex flex-col justify-between self-stretch py-1"><div><h3 class="font-bold text-zinc-800 leading-tight mb-2">园区企业数字创新沙龙成功举办</h3></div><div class="flex items-center text-xs text-zinc-400 gap-4"><span><i class="ri-building-4-line mr-1"></i>园区运营部</span><span>2025-06-25</span></div></div></a>
                </div>
            </div>
        </main>
        
        <!-- 底部导航栏 -->
        <nav id="bottom-nav" class="fixed bottom-0 left-1/2 -translate-x-1/2 w-full max-w-[420px] bg-white/70 backdrop-blur-xl border-t border-zinc-200">
            <div class="flex justify-around items-center h-16">
                <a href="index.html" class="flex flex-col items-center justify-center gap-1 text-zinc-800 flex-1 py-2"><i class="ri-home-4-fill text-2xl"></i><span class="text-xs font-semibold">首页</span></a>
                <a href="activities.html" class="flex flex-col items-center justify-center gap-1 text-zinc-500 hover:text-zinc-800 transition-colors flex-1 py-2"><i class="ri-calendar-event-line text-2xl"></i><span class="text-xs font-medium">园区活动</span></a>
                <a href="building-management.html" class="flex flex-col items-center justify-center gap-1 text-zinc-500 hover:text-zinc-800 transition-colors flex-1 py-2"><i class="ri-apps-line text-2xl"></i><span class="text-xs font-medium">楼宇管理</span></a>
                <a href="me.html" class="flex flex-col items-center justify-center gap-1 text-zinc-500 hover:text-zinc-800 transition-colors flex-1 py-2"><i class="ri-user-line text-2xl"></i><span class="text-xs font-medium">我的</span></a>
            </div>
        </nav>
    </div>
    
    <!-- 地点选择弹窗 (Modal) -->
    <div id="location-modal" class="hidden fixed inset-0 z-50">
        <!-- 遮罩层 -->
        <div id="modal-backdrop" class="fixed inset-0 bg-black/50"></div>
        <!-- 内容 -->
        <div id="modal-content" class="relative bg-zinc-50 mt-16 mx-4 p-4 rounded-2xl shadow-lg">
            <div class="flex justify-between items-center mb-4">
                <h3 class="font-bold text-lg text-zinc-900">选择园区</h3>
                <button id="close-modal-btn" class="text-zinc-500 hover:text-zinc-800"><i class="ri-close-line text-2xl"></i></button>
            </div>
            <ul id="location-list" class="space-y-2">
                <!-- 列表项将由JS动态生成 -->
            </ul>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- 动画逻辑 (用try...catch包裹，增强健壮性) ---
            try {
                // 代码注释: 首先检查Framer Motion库是否已成功加载
                if (typeof motion !== 'undefined') {
                    const { stagger, animate } = motion;

                    // 代码注释: 封装一个函数来执行批量元素的动画，增加警告以防选择器失效
                    const animateElements = (selector, options) => {
                        const elements = document.querySelectorAll(selector);
                        if (elements.length > 0) {
                            animate(elements, { opacity: [0, 1], y: [20, 0] }, options);
                        } else {
                            console.warn(`Animation selector not found: ${selector}`);
                        }
                    }
                    
                    animate('#header', { opacity: [0, 1], y: [-20, 0] }, { duration: 0.5, delay: 0.2 });
                    animate('#main-dashboard', { opacity: [0, 1], scale: [0.95, 1] }, { duration: 0.5, delay: 0.3 });
                    animateElements('#quick-actions > a', { duration: 0.4, delay: stagger(0.1, { start: 0.5 }) });
                    animateElements('#smart-services > a', { duration: 0.4, delay: stagger(0.1, { start: 0.8 }) });
                    animate('#news-section', { opacity: [0, 1] }, { duration: 0.6, delay: 1.0 });
                } else {
                    console.warn("Framer Motion library (motion) not loaded. Skipping animations.");
                }
            } catch (error) {
                // 代码注释: 捕获动画过程中可能发生的任何错误，并在控制台报告，以防止中断后续脚本
                console.error("An error occurred during animation setup:", error);
            }

            // --- 地点选择弹窗逻辑 (这部分现在保证会执行) ---
            const locationSwitcher = document.getElementById('location-switcher');
            const locationModal = document.getElementById('location-modal');
            const modalBackdrop = document.getElementById('modal-backdrop');
            const modalContent = document.getElementById('modal-content');
            const closeModalBtn = document.getElementById('close-modal-btn');
            const currentLocationSpan = document.getElementById('current-location');
            const locationList = document.getElementById('location-list');

            const locations = ["宁波御景湾", "杭州未来科技城", "上海张江高科园"];
            let currentLocation = "宁波御景湾";

            // 渲染地点列表
            function renderLocationList() {
                locationList.innerHTML = '';
                locations.forEach(location => {
                    const isSelected = location === currentLocation;
                    const li = document.createElement('li');
                    li.className = `flex justify-between items-center p-3 rounded-lg cursor-pointer transition-colors ${isSelected ? 'bg-zinc-800 text-white shadow-md' : 'bg-white hover:bg-zinc-100'}`;
                    li.textContent = location;
                    if(isSelected) {
                        const checkIcon = document.createElement('i');
                        checkIcon.className = 'ri-check-line text-xl';
                        li.appendChild(checkIcon);
                    }
                    li.addEventListener('click', () => {
                        currentLocation = location;
                        currentLocationSpan.textContent = location;
                        closeModal();
                    });
                    locationList.appendChild(li);
                });
            }

            // 打开弹窗
            function openModal() {
                renderLocationList();
                locationModal.classList.remove('hidden');
                modalBackdrop.classList.add('backdrop-enter', 'backdrop-enter-active');
                modalContent.classList.add('modal-enter', 'modal-enter-active');
                modalBackdrop.classList.remove('backdrop-exit', 'backdrop-exit-active');
                modalContent.classList.remove('modal-exit', 'modal-exit-active');
            }

            // 关闭弹窗
            function closeModal() {
                modalBackdrop.classList.add('backdrop-exit', 'backdrop-exit-active');
                modalContent.classList.add('modal-exit', 'modal-exit-active');
                modalBackdrop.classList.remove('backdrop-enter', 'backdrop-enter-active');
                modalContent.classList.remove('modal-enter', 'modal-enter-active');
                setTimeout(() => {
                    locationModal.classList.add('hidden');
                }, 300); 
            }
            
            // 确保核心DOM元素存在后再绑定事件
            if (locationSwitcher) {
                locationSwitcher.addEventListener('click', openModal);
            } else {
                console.error("Element with ID 'location-switcher' not found.");
            }
            if(closeModalBtn) closeModalBtn.addEventListener('click', closeModal);
            if(modalBackdrop) modalBackdrop.addEventListener('click', closeModal);
            
            console.log("智慧园区首页加载完成，核心交互逻辑已初始化。");
        });
    </script>
</body>
</html>
