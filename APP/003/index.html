<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>贝果Bagel | 高端潮玩定制</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@latest/dist/tabler-icons.min.js"
      integrity="sha384-PC5Tk8v3QlUvUxE1u0WrDm6OjC2bq3JhJZ0V7DvM2Dx7Qf3FdK0cZ1U4hR1BpN9Q"
      crossorigin="anonymous"
    ></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@latest/dist/tabler-icons.min.css"
    />
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              midnight: {
                900: "#0f172a", // 主背景
                800: "#1e293b", // 卡片背景
                700: "#334155", // 边框、次要元素
                600: "#475569", // hover等
                500: "#64748b",
              },
              gold: {
                100: "#fffbeb",
                200: "#fef3c7", // 浅金色文字、点缀
                300: "#fde68a",
                400: "#fcd34d",
                500: "#facc15", // 主行动点、高亮金色
                600: "#eab308",
                700: "#ca8a04",
                800: "#a16207",
                900: "#713f12",
              },
              ruby: { DEFAULT: "#e11d48", 300: "#fda4af" }, // 红宝石色
              sapphire: { DEFAULT: "#2563eb", 300: "#93c5fd" }, // 蓝宝石色
              emerald: { DEFAULT: "#059669", 300: "#6ee7b7" }, // 祖母绿色
              amethyst: { DEFAULT: "#7e22ce", 300: "#d8b4fe" }, // 紫水晶色
              "rose-gold": "#B76E79", // 玫瑰金色 (示例)
            },
            fontFamily: {
              playfair: ["Playfair Display", "serif"],
              inter: ["Inter", "sans-serif"],
            },
            aspectRatio: {
              "21/9": "21 / 9",
              "32/9": "32 / 9",
            },
          },
        },
      };
    </script>
    <style>
      body {
        background-color: #374151; /* page background for centering app */
        font-family: "Inter", sans-serif; /* Default sans-serif font */
        margin: 0;
        padding: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        overflow: hidden; /* Prevent body scrollbars */
      }
      .app-container {
        font-family: "Playfair Display", serif; /* Base font for app, elegant serif */
      }
      .inter-font {
        font-family: "Inter", sans-serif; /* For UI elements needing clarity */
      }
      .jewel-border {
        position: relative;
        overflow: hidden;
      }
      .jewel-border::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 1px; /* Thinner, more refined line */
        background: linear-gradient(
          90deg,
          transparent,
          rgba(250, 204, 21, 0.7),
          transparent
        ); /* gold-500 with opacity */
        animation: shine 4s infinite linear; /* Slower, more elegant shine */
      }
      @keyframes shine {
        0% {
          transform: translateX(-100%) skewX(-20deg);
          opacity: 0.5;
        }
        50% {
          transform: translateX(100%) skewX(-20deg);
          opacity: 1;
        }
        100% {
          transform: translateX(-100%) skewX(-20deg);
          opacity: 0.5;
        }
      }
      .gem-btn {
        /* For buttons or cards that need a jewel-like feel */
        position: relative;
        overflow: hidden;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }
      .gem-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2),
          0 0 15px rgba(250, 204, 21, 0.3);
      }
      .gem-btn::before {
        /* Subtle rotating glint */
        content: "";
        position: absolute;
        top: -60%; /* Adjusted for better visual */
        left: -60%;
        width: 220%;
        height: 220%;
        background: radial-gradient(
          circle,
          rgba(255, 255, 255, 0.15) 0%,
          transparent 50%
        );
        transform-origin: center center;
        animation: gem-shine 7s infinite linear;
        opacity: 0; /* Start transparent, fade in on hover or interaction */
        transition: opacity 0.3s;
      }
      .gem-btn:hover::before {
        opacity: 1;
      }
      @keyframes gem-shine {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
      .fade-in {
        animation: fadeIn 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(15px) scale(0.98);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      .custom-scrollbar::-webkit-scrollbar {
        display: none; /* Hide scrollbar */
      }
      .custom-scrollbar {
        -ms-overflow-style: none; /* IE and Edge */
        scrollbar-width: none; /* Firefox */
      }
      .sparkle-overlay {
        /* More subtle and refined sparkle */
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        overflow: hidden; /* Ensure sparkles stay within bounds */
      }
      .sparkle-overlay .sparkle {
        /* Individual sparkle particle */
        position: absolute;
        width: 2px;
        height: 2px;
        background-color: rgba(255, 223, 186, 0.7); /* Soft gold/white */
        border-radius: 50%;
        box-shadow: 0 0 3px rgba(255, 223, 186, 0.5);
        animation: sparkle-drift 8s infinite ease-in-out;
        opacity: 0; /* Start invisible */
      }
      @keyframes sparkle-drift {
        /* More gentle movement */
        0%,
        100% {
          opacity: 0;
          transform: translate(0, 0) scale(0.5);
        }
        25% {
          opacity: 0.8;
          transform: scale(1);
        }
        50% {
          opacity: 0.6;
          transform: translate(var(--tx, 10px), var(--ty, -15px)) scale(0.8);
        }
        75% {
          opacity: 0.8;
          transform: scale(1);
        }
      }
      .page {
        display: none;
        animation: fadeIn 0.5s ease-in-out;
        height: calc(
          100% - 50px - 70px
        ); /* Full height minus status bar and nav bar */
        overflow-y: auto;
        overflow-x: hidden;
        position: absolute;
        top: 50px; /* Below status bar */
        left: 0;
        right: 0;
        bottom: 70px; /* Above nav bar */
      }
      .active-page {
        display: flex; /* Use flex for internal layout */
        flex-direction: column;
      }
      .tab-active {
        color: #facc15; /* gold-500 */
        /* Optional: add a subtle bottom border or background highlight */
        /* border-bottom: 2px solid #facc15; */
        background: linear-gradient(
          to top,
          rgba(250, 204, 21, 0.1),
          transparent
        );
      }
      .drawer {
        position: fixed;
        top: 0;
        right: -100%; /* Start off-screen */
        width: 90%;
        max-width: 380px; /* Max width for drawer */
        height: 100%;
        background: linear-gradient(
          145deg,
          #1e293b 0%,
          #0f172a 80%
        ); /* midnight-800 to midnight-900 */
        box-shadow: -8px 0 25px rgba(0, 0, 0, 0.5);
        z-index: 100; /* Higher than overlay */
        transition: right 0.4s cubic-bezier(0.33, 1, 0.68, 1);
        display: flex;
        flex-direction: column;
      }
      .drawer-open {
        right: 0;
      }
      .overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.6); /* Darker overlay */
        backdrop-filter: blur(8px); /* Stronger blur */
        z-index: 90; /* Below drawer, above content */
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.4s ease;
      }
      .overlay-visible {
        opacity: 1;
        pointer-events: all;
      }
      .bottom-nav-container {
        height: 70px; /* Fixed height for nav bar */
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
      }
      .product-card-image {
        aspect-ratio: 1 / 1;
        background-size: cover;
        background-position: center;
        border-radius: 0.5rem; /* Tailwind's rounded-lg */
      }
      .shop-logo-image {
        width: 2rem; /* 32px */
        height: 2rem; /* 32px */
        border-radius: 9999px; /* rounded-full */
        background-size: cover;
        background-position: center;
        border: 1px solid rgba(250, 204, 21, 0.3); /* Subtle gold border */
      }
      .store-product-card-image {
        aspect-ratio: 1 / 1; /* Square aspect ratio */
        background-size: cover;
        background-position: center;
        border-radius: 0.375rem; /* Tailwind's rounded-md */
      }

      .status-timeline {
        position: relative;
        padding-left: 1rem;
        border-left: 2px solid #334155; /* midnight-700 */
      }
      .status-timeline::after {
        content: "";
        position: absolute;
        left: -10px; /* Adjusted for border */
        top: 0;
        width: 18px;
        height: 18px;
        border-radius: 50%;
        background: #334155; /* midnight-700 */
        border: 3px solid #0f172a; /* midnight-900 (page background) */
        z-index: 1;
      }
      .active-status::after {
        background: #facc15; /* gold-500 */
        border-color: #fef3c7; /* gold-200 */
        box-shadow: 0 0 0 4px rgba(250, 204, 21, 0.3);
      }
      .completed-status::after {
        background: #059669; /* emerald-500 */
        border-color: #a7f3d0; /* emerald-200 */
      }
      .vip-badge {
        background: linear-gradient(to right, #e5c46f, #ffd700, #e5c46f);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        position: relative;
        display: inline-block;
        font-weight: bold;
      }
      .vip-badge::after {
        content: "✦";
        position: absolute;
        top: -8px;
        right: -12px;
        font-size: 14px;
        color: #ffd700; /* gold (from original) */
      }
      .diamond-icon {
        background: linear-gradient(145deg, #f5f7fa, #c3cfe2);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        text-shadow: 0 0 5px rgba(255, 255, 255, 0.3);
      }
    </style>
  </head>
  <body class="bg-gray-700">
    <!-- Main app container -->
    <div
      id="app-shell"
      class="relative w-full max-w-md h-[calc(100vh-40px)] sm:h-[700px] sm:max-h-[calc(100vh-80px)] overflow-hidden rounded-none sm:rounded-2xl shadow-2xl bg-midnight-900 backdrop-blur-md border border-midnight-700 flex flex-col app-container"
    >
      <!-- Sparkle effect for jewelry shine -->
      <div class="sparkle-overlay" id="sparkle-container"></div>

      <!-- Status bar -->
      <div
        class="flex justify-between items-center px-4 py-1 h-[50px] text-xs bg-midnight-900/50 backdrop-blur-sm text-slate-400 inter-font flex-shrink-0"
      >
        <div class="flex items-center space-x-1">
          <div id="current-time">09:47</div>
        </div>
        <div class="flex items-center space-x-1">
          <i class="ti ti-signal-4g"></i>
          <i class="ti ti-wifi"></i>
          <div id="battery-level">100%</div>
          <i class="ti ti-battery-4"></i>
        </div>
      </div>

      <!-- PAGES CONTAINER -->
      <div class="flex-grow relative overflow-hidden">
        <!-- Home Page -->
        <div id="home-page" class="page active-page custom-scrollbar">
          <div class="flex-shrink-0">
            <!-- Top app bar -->
            <div
              class="jewel-border p-4 flex justify-between items-center bg-gradient-to-r from-midnight-900/80 to-midnight-800/70 backdrop-blur-sm sticky top-0 z-10"
            >
              <div
                class="text-xl font-bold tracking-wide text-gold-500 flex items-center font-playfair"
              >
                <i class="ti ti-diamond-filled mr-2 text-gold-300 text-2xl"></i>
                <span>贝果</span
                ><span class="font-normal text-slate-300 ml-1.5 text-lg"
                  >Bagel</span
                >
              </div>
              <button
                class="p-2 rounded-full bg-midnight-700/60 hover:bg-midnight-600/80 transition-all border border-midnight-600 hover:border-gold-500/70 gem-btn"
              >
                <i class="ti ti-headset text-gold-400 text-xl"></i>
              </button>
            </div>
          </div>

          <!-- Content area -->
          <div
            class="flex-1 overflow-y-auto custom-scrollbar p-4 space-y-6 pb-8"
          >
            <!-- Section: Categories -->
            <div>
              <h2
                class="text-lg font-semibold mb-4 text-gold-300 font-playfair"
              >
                定制分类
              </h2>
              <div class="grid grid-cols-4 gap-3">
                <a
                  href="#"
                  onclick="navigateToCategory('饰品')"
                  class="gem-btn rounded-xl bg-midnight-800/70 border border-midnight-700/80 hover:border-ruby/70 p-3 text-center relative flex flex-col items-center justify-center transition-all hover:shadow-lg hover:shadow-ruby/30"
                >
                  <div
                    class="bg-cover bg-center rounded-lg h-16 w-full mb-2 product-card-image"
                    style="
                      background-image: url(https://cdn.sa.net/2025/06/03/KXfP4zQhD6LOvEN.jpg);
                    "
                  ></div>
                  <div class="font-medium text-slate-200 text-xs inter-font">
                    饰品
                  </div>
                </a>
                <a
                  href="#"
                  onclick="navigateToCategory('画作')"
                  class="gem-btn rounded-xl bg-midnight-800/70 border border-midnight-700/80 hover:border-sapphire/70 p-3 text-center relative flex flex-col items-center justify-center transition-all hover:shadow-lg hover:shadow-sapphire/30"
                >
                  <div
                    class="bg-cover bg-center rounded-lg h-16 w-full mb-2 product-card-image"
                    style="
                      background-image: url(https://cdn.sa.net/2025/06/03/KAoJ9DPMX42QxaN.jpg);
                    "
                  ></div>
                  <div class="font-medium text-slate-200 text-xs inter-font">
                    画作
                  </div>
                </a>
                <a
                  href="#"
                  onclick="navigateToCategory('宠物毛毡')"
                  class="gem-btn rounded-xl bg-midnight-800/70 border border-midnight-700/80 hover:border-emerald/70 p-3 text-center relative flex flex-col items-center justify-center transition-all hover:shadow-lg hover:shadow-emerald/30"
                >
                  <div
                    class="bg-cover bg-center rounded-lg h-16 w-full mb-2 product-card-image"
                    style="
                      background-image: url(https://cdn.sa.net/2025/06/03/sSRjvOXGYmzFAtP.jpg);
                    "
                  ></div>
                  <div class="font-medium text-slate-200 text-xs inter-font">
                    宠物毛毡
                  </div>
                </a>
                <a
                  href="#"
                  onclick="navigateToCategory('贴纸')"
                  class="gem-btn rounded-xl bg-midnight-800/70 border border-midnight-700/80 hover:border-amethyst/70 p-3 text-center relative flex flex-col items-center justify-center transition-all hover:shadow-lg hover:shadow-amethyst/30"
                >
                  <div
                    class="bg-cover bg-center rounded-lg h-16 w-full mb-2 product-card-image"
                    style="
                      background-image: url(https://cdn.sa.net/2025/06/03/NLMPyviuVE5kWhD.jpg);
                    "
                  ></div>
                  <div class="font-medium text-slate-200 text-xs inter-font">
                    贴纸
                  </div>
                </a>
              </div>
            </div>

            <!-- Recently viewed -->
            <div>
              <div class="flex justify-between items-center mb-3">
                <h2 class="text-lg font-semibold text-gold-300 font-playfair">
                  最近浏览
                </h2>
                <button
                  class="text-xs text-slate-400 hover:text-gold-400 flex items-center inter-font"
                >
                  更多 <i class="ti ti-chevron-right ml-1 text-sm"></i>
                </button>
              </div>
              <div class="grid grid-cols-3 gap-3">
                <div
                  class="relative rounded-lg overflow-hidden bg-midnight-800/50 border border-midnight-700/70 group"
                >
                  <div
                    class="product-card-image"
                    style="
                      background-image: url(https://cdn.sa.net/2025/06/03/UJbWPxGvfeLmTF3.jpg);
                    "
                  >
                    <button
                      onclick="toggleLike(this, 101)"
                      class="absolute top-2 right-2 p-1.5 rounded-full bg-black/50 hover:bg-ruby/80 transition-all text-white"
                    >
                      <i class="ti ti-heart-filled text-base text-red-500"></i>
                    </button>
                  </div>
                  <div class="p-2 inter-font">
                    <div
                      class="text-xs text-slate-300 truncate group-hover:text-gold-400 transition"
                    >
                      蓝宝石项链
                    </div>
                    <div class="flex justify-between items-center mt-1">
                      <span class="text-sm text-amber-400 font-semibold"
                        >¥1,280</span
                      >
                      <del class="text-xs text-slate-500">¥1,880</del>
                    </div>
                  </div>
                </div>
                <div
                  class="relative rounded-lg overflow-hidden bg-midnight-800/50 border border-midnight-700/70 group"
                >
                  <div
                    class="product-card-image"
                    style="
                      background-image: url(https://cdn.sa.net/2025/06/03/XV7hqMUPbcDHNCm.jpg);
                    "
                  >
                    <button
                      onclick="toggleLike(this, 102)"
                      class="absolute top-2 right-2 p-1.5 rounded-full bg-black/50 hover:bg-ruby/80 transition-all text-white"
                    >
                      <i class="ti ti-heart text-base"></i>
                    </button>
                  </div>
                  <div class="p-2 inter-font">
                    <div
                      class="text-xs text-slate-300 truncate group-hover:text-gold-400 transition"
                    >
                      星空抽象画
                    </div>
                    <div class="text-sm text-amber-400 font-semibold mt-1">
                      ¥850
                    </div>
                  </div>
                </div>
                <div
                  class="relative rounded-lg overflow-hidden bg-midnight-800/50 border border-midnight-700/70 group"
                >
                  <div
                    class="product-card-image"
                    style="
                      background-image: url(https://cdn.sa.net/2025/06/03/ngVtJWckCw4qxo5.jpg);
                    "
                  >
                    <button
                      onclick="toggleLike(this, 103)"
                      class="absolute top-2 right-2 p-1.5 rounded-full bg-black/50 hover:bg-ruby/80 transition-all text-white"
                    >
                      <i class="ti ti-heart text-base"></i>
                    </button>
                  </div>
                  <div class="p-2 inter-font">
                    <div
                      class="text-xs text-slate-300 truncate group-hover:text-gold-400 transition"
                    >
                      柴犬毛毡套装
                    </div>
                    <div class="text-sm text-amber-400 font-semibold mt-1">
                      ¥580
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Banner -->
            <div class="rounded-xl overflow-hidden shadow-lg">
              <div
                class="bg-cover bg-center aspect-21/9"
                style="
                  background-image: url(https://cdn.sa.net/2025/06/03/HIbq8LgCRT75UGn.jpg);
                "
              >
                <div
                  class="bg-gradient-to-t from-black/90 via-black/50 to-transparent w-full h-full p-5 flex flex-col justify-end"
                >
                  <h3 class="font-bold text-2xl text-white font-playfair mb-1">
                    夏日定制季
                  </h3>
                  <p class="text-sm text-slate-200/90 mb-3 inter-font">
                    限时8折，专属定制礼物，镌刻夏日时光。
                  </p>
                  <button
                    class="self-start mt-2 px-5 py-2 bg-gold-500 text-midnight-900 text-sm font-semibold rounded-lg hover:bg-gold-400 transition-colors gem-btn inter-font"
                  >
                    立即定制
                  </button>
                </div>
              </div>
            </div>

            <!-- Shops -->
            <div>
              <h2
                class="text-lg font-semibold mb-4 text-gold-300 font-playfair"
              >
                精选店铺
              </h2>

              <div
                class="bg-midnight-800/60 rounded-xl border border-midnight-700/70 p-4 mb-5 shadow-md"
              >
                <div class="flex justify-between items-center mb-4">
                  <div class="flex items-center">
                    <div
                      class="shop-logo-image mr-3"
                      style="
                        background-image: url(https://cdn.sa.net/2025/06/03/P6xNEMQVGqdusbc.jpg);
                      "
                    ></div>
                    <div>
                      <div
                        class="font-semibold text-base text-slate-100 font-playfair hover:text-gold-400 transition cursor-pointer"
                        onclick="switchPage('store-page', { storeId: 1 })"
                      >
                        星光艺术坊
                      </div>
                      <div
                        class="flex items-center text-xs text-slate-400 inter-font mt-0.5"
                      >
                        <i
                          class="ti ti-star-filled text-amber-400 mr-1 text-sm"
                        ></i
                        >4.8 <span class="mx-1.5 text-slate-600">|</span> 月销
                        128+
                      </div>
                    </div>
                  </div>
                  <div class="flex items-center space-x-2">
                    <button
                      class="p-2 rounded-full hover:bg-midnight-700/80 transition-colors"
                    >
                      <i
                        class="ti ti-share-3 text-slate-400 hover:text-sapphire-300 text-lg"
                      ></i>
                    </button>
                    <button
                      onclick="toggleFollow(this, 1)"
                      class="px-3 py-1.5 rounded-full text-xs border border-gold-500/80 text-gold-400 hover:bg-gold-500/20 transition-colors inter-font"
                    >
                      关注
                    </button>
                  </div>
                </div>

                <div
                  class="flex overflow-x-auto custom-scrollbar pb-2 -mx-1 px-1 space-x-3"
                >
                  <div
                    class="flex-shrink-0 w-36 bg-midnight-700/50 rounded-lg border border-midnight-600/50 p-2 group"
                  >
                    <div class="relative">
                      <div
                        class="store-product-card-image"
                        style="
                          background-image: url(https://cdn.sa.net/2025/06/03/KXfP4zQhD6LOvEN.jpg);
                        "
                      >
                        <div
                          class="absolute top-1.5 left-1.5 bg-ruby/80 text-white px-1.5 py-0.5 rounded-sm text-[10px] font-semibold inter-font"
                        >
                          7折
                        </div>
                        <button
                          onclick="toggleLike(this, 201)"
                          class="absolute top-1.5 right-1.5 p-1 rounded-full bg-black/50 hover:bg-ruby/80 transition-all text-white"
                        >
                          <i class="ti ti-heart text-sm"></i>
                        </button>
                      </div>
                      <div class="pt-2 inter-font">
                        <div
                          class="text-xs text-slate-300 truncate group-hover:text-gold-400 transition"
                        >
                          星光手链
                        </div>
                        <div class="flex justify-between items-center mt-0.5">
                          <span class="text-sm text-amber-400 font-semibold"
                            >¥380</span
                          >
                          <del class="text-xs text-slate-500">¥580</del>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div
                    class="flex-shrink-0 w-36 bg-midnight-700/50 rounded-lg border border-midnight-600/50 p-2 group"
                  >
                    <div class="relative">
                      <div
                        class="store-product-card-image"
                        style="
                          background-image: url(https://cdn.sa.net/2025/06/03/KAoJ9DPMX42QxaN.jpg);
                        "
                      >
                        <button
                          onclick="toggleLike(this, 202)"
                          class="absolute top-1.5 right-1.5 p-1 rounded-full bg-black/50 hover:bg-ruby/80 transition-all text-white"
                        >
                          <i
                            class="ti ti-heart-filled text-red-500 text-sm"
                          ></i>
                        </button>
                      </div>
                      <div class="pt-2 inter-font">
                        <div
                          class="text-xs text-slate-300 truncate group-hover:text-gold-400 transition"
                        >
                          几何画作
                        </div>
                        <div
                          class="text-sm text-amber-400 font-semibold mt-0.5"
                        >
                          ¥690
                        </div>
                      </div>
                    </div>
                  </div>
                  <div
                    class="flex-shrink-0 w-36 bg-midnight-700/50 rounded-lg border border-midnight-600/50 p-2 group"
                  >
                    <div class="relative">
                      <div
                        class="store-product-card-image"
                        style="
                          background-image: url(https://cdn.sa.net/2025/06/03/IsqmiLSDB3Cn81p.jpg);
                        "
                      >
                        <button
                          onclick="toggleLike(this, 203)"
                          class="absolute top-1.5 right-1.5 p-1 rounded-full bg-black/50 hover:bg-ruby/80 transition-all text-white"
                        >
                          <i class="ti ti-heart text-sm"></i>
                        </button>
                      </div>
                      <div class="pt-2 inter-font">
                        <div
                          class="text-xs text-slate-300 truncate group-hover:text-gold-400 transition"
                        >
                          猫咪毛毡项链
                        </div>
                        <div
                          class="text-sm text-amber-400 font-semibold mt-0.5"
                        >
                          ¥420
                        </div>
                      </div>
                    </div>
                  </div>
                  <div
                    class="flex-shrink-0 w-36 bg-midnight-700/50 rounded-lg border border-midnight-600/50 p-2 group"
                  >
                    <div class="relative">
                      <div
                        class="store-product-card-image"
                        style="
                          background-image: url(https://cdn.sa.net/2025/06/03/vqTagyotSnsrLz3.jpg);
                        "
                      >
                        <div
                          class="absolute top-1.5 left-1.5 bg-sapphire/80 text-white px-1.5 py-0.5 rounded-sm text-[10px] font-semibold inter-font"
                        >
                          新品
                        </div>
                        <button
                          onclick="toggleLike(this, 204)"
                          class="absolute top-1.5 right-1.5 p-1 rounded-full bg-black/50 hover:bg-ruby/80 transition-all text-white"
                        >
                          <i class="ti ti-heart text-sm"></i>
                        </button>
                      </div>
                      <div class="pt-2 inter-font">
                        <div
                          class="text-xs text-slate-300 truncate group-hover:text-gold-400 transition"
                        >
                          星空系列贴纸
                        </div>
                        <div
                          class="text-sm text-amber-400 font-semibold mt-0.5"
                        >
                          ¥85
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div
                class="bg-midnight-800/60 rounded-xl border border-midnight-700/70 p-4 shadow-md"
              >
                <div class="flex justify-between items-center mb-4">
                  <div class="flex items-center">
                    <div
                      class="shop-logo-image mr-3"
                      style="
                        background-image: url(https://cdn.sa.net/2025/06/03/ohHz5MqL9WSnlYx.jpg);
                      "
                    ></div>
                    <div>
                      <div
                        class="font-semibold text-base text-slate-100 font-playfair hover:text-gold-400 transition cursor-pointer"
                        onclick="switchPage('store-page', { storeId: 2 })"
                      >
                        匠心工坊
                      </div>
                      <div
                        class="flex items-center text-xs text-slate-400 inter-font mt-0.5"
                      >
                        <i
                          class="ti ti-star-filled text-amber-400 mr-1 text-sm"
                        ></i
                        >4.9 <span class="mx-1.5 text-slate-600">|</span> 月销
                        246+
                      </div>
                    </div>
                  </div>
                  <div class="flex items-center space-x-2">
                    <button
                      class="p-2 rounded-full hover:bg-midnight-700/80 transition-colors"
                    >
                      <i
                        class="ti ti-share-3 text-slate-400 hover:text-sapphire-300 text-lg"
                      ></i>
                    </button>
                    <button
                      onclick="toggleFollow(this, 2, true)"
                      class="px-3 py-1.5 rounded-full text-xs bg-gold-500/10 border border-gold-500/50 text-gold-400 hover:bg-gold-500/20 transition-colors inter-font"
                    >
                      已关注
                    </button>
                  </div>
                </div>

                <div class="grid grid-cols-2 gap-3">
                  <div
                    class="bg-midnight-700/50 rounded-lg border border-midnight-600/50 p-2 group"
                  >
                    <div class="relative">
                      <div
                        class="store-product-card-image"
                        style="
                          background-image: url(https://cdn.sa.net/2025/06/03/5jI6fbX7ouhApyN.jpg);
                        "
                      >
                        <div
                          class="absolute top-1.5 left-1.5 bg-ruby/80 text-white px-1.5 py-0.5 rounded-sm text-[10px] font-semibold inter-font"
                        >
                          限时5折
                        </div>
                        <button
                          onclick="toggleLike(this, 301)"
                          class="absolute top-1.5 right-1.5 p-1 rounded-full bg-black/50 hover:bg-ruby/80 transition-all text-white"
                        >
                          <i class="ti ti-heart text-sm"></i>
                        </button>
                      </div>
                      <div class="pt-2 inter-font">
                        <div
                          class="text-sm font-medium text-slate-300 truncate group-hover:text-gold-400 transition"
                        >
                          红宝石耳环
                        </div>
                        <div class="flex justify-between items-center mt-0.5">
                          <span class="text-base text-amber-400 font-semibold"
                            >¥1,580</span
                          >
                          <del class="text-xs text-slate-500">¥2,080</del>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div
                    class="bg-midnight-700/50 rounded-lg border border-midnight-600/50 p-2 group"
                  >
                    <div class="relative">
                      <div
                        class="store-product-card-image"
                        style="
                          background-image: url(https://cdn.sa.net/2025/06/03/8uP9tYbvrI5yOdl.jpg);
                        "
                      >
                        <button
                          onclick="toggleLike(this, 302)"
                          class="absolute top-1.5 right-1.5 p-1 rounded-full bg-black/50 hover:bg-ruby/80 transition-all text-white"
                        >
                          <i class="ti ti-heart text-sm"></i>
                        </button>
                      </div>
                      <div class="pt-2 inter-font">
                        <div
                          class="text-sm font-medium text-slate-300 truncate group-hover:text-gold-400 transition"
                        >
                          孔雀石吊坠
                        </div>
                        <div
                          class="text-base text-amber-400 font-semibold mt-0.5"
                        >
                          ¥980
                        </div>
                      </div>
                    </div>
                  </div>
                  <div
                    class="bg-midnight-700/50 rounded-lg border border-midnight-600/50 p-2 group"
                  >
                    <div class="relative">
                      <div
                        class="store-product-card-image"
                        style="
                          background-image: url(https://cdn.sa.net/2025/06/03/78LG6JqmkU5WtCr.jpg);
                        "
                      >
                        <button
                          onclick="toggleLike(this, 303)"
                          class="absolute top-1.5 right-1.5 p-1 rounded-full bg-black/50 hover:bg-ruby/80 transition-all text-white"
                        >
                          <i class="ti ti-heart text-sm"></i>
                        </button>
                      </div>
                      <div class="pt-2 inter-font">
                        <div
                          class="text-sm font-medium text-slate-300 truncate group-hover:text-gold-400 transition"
                        >
                          星空手链
                        </div>
                        <div
                          class="text-base text-amber-400 font-semibold mt-0.5"
                        >
                          ¥650
                        </div>
                      </div>
                    </div>
                  </div>
                  <div
                    class="bg-midnight-700/50 rounded-lg border border-midnight-600/50 p-2 group"
                  >
                    <div class="relative">
                      <div
                        class="store-product-card-image"
                        style="
                          background-image: url(https://cdn.sa.net/2025/06/03/cfUJTk8lwxjZs5n.jpg);
                        "
                      >
                        <button
                          onclick="toggleLike(this, 304)"
                          class="absolute top-1.5 right-1.5 p-1 rounded-full bg-black/50 hover:bg-ruby/80 transition-all text-white"
                        >
                          <i
                            class="ti ti-heart-filled text-red-500 text-sm"
                          ></i>
                        </button>
                      </div>
                      <div class="pt-2 inter-font">
                        <div
                          class="text-sm font-medium text-slate-300 truncate group-hover:text-gold-400 transition"
                        >
                          几何耳钉
                        </div>
                        <div
                          class="text-base text-amber-400 font-semibold mt-0.5"
                        >
                          ¥520
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Category/Search Page (Structure Only) -->
        <div id="category-page" class="page custom-scrollbar">
          <div class="flex-shrink-0">
            <div
              class="jewel-border p-4 flex items-center bg-gradient-to-r from-midnight-900/80 to-midnight-800/70 backdrop-blur-sm sticky top-0 z-10"
            >
              <div class="relative flex-grow">
                <input
                  type="text"
                  placeholder="搜索独特定制商品或设计师..."
                  class="w-full py-2.5 pl-12 pr-4 rounded-lg bg-midnight-800/70 border border-midnight-700/80 focus:border-gold-500/70 focus:ring-1 focus:ring-gold-500/50 focus:outline-none text-slate-200 placeholder-slate-500 inter-font text-sm transition-colors"
                />
                <i
                  class="ti ti-search absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400 text-lg"
                ></i>
              </div>
            </div>
          </div>
          <div
            class="flex-1 overflow-y-auto custom-scrollbar p-4 space-y-6 pb-8"
          >
            <div>
              <h2
                class="text-lg font-semibold mb-4 text-gold-300 font-playfair"
              >
                商品分类
              </h2>
              <div class="grid grid-cols-3 gap-4">
                <a
                  href="#"
                  onclick="filterByCategory('首饰')"
                  class="gem-btn rounded-xl bg-midnight-800/70 border border-midnight-700/80 hover:border-sapphire/70 p-4 text-center flex flex-col items-center justify-center space-y-2 transition-all hover:shadow-lg hover:shadow-sapphire/30"
                >
                  <i class="ti ti-necklace text-3xl text-sapphire-300"></i>
                  <div class="font-medium text-slate-200 text-sm inter-font">
                    首饰
                  </div>
                </a>
                <a
                  href="#"
                  onclick="filterByCategory('送礼')"
                  class="gem-btn rounded-xl bg-midnight-800/70 border border-midnight-700/80 hover:border-ruby/70 p-4 text-center flex flex-col items-center justify-center space-y-2 transition-all hover:shadow-lg hover:shadow-ruby/30"
                >
                  <i class="ti ti-gift text-3xl text-ruby-300"></i>
                  <div class="font-medium text-slate-200 text-sm inter-font">
                    送礼甄选
                  </div>
                </a>
                <a
                  href="#"
                  onclick="filterByCategory('创意艺术')"
                  class="gem-btn rounded-xl bg-midnight-800/70 border border-midnight-700/80 hover:border-emerald/70 p-4 text-center flex flex-col items-center justify-center space-y-2 transition-all hover:shadow-lg hover:shadow-emerald/30"
                >
                  <i class="ti ti-palette text-3xl text-emerald-300"></i>
                  <div class="font-medium text-slate-200 text-sm inter-font">
                    创意艺术
                  </div>
                </a>
                <a
                  href="#"
                  onclick="filterByCategory('潮玩设备')"
                  class="gem-btn rounded-xl bg-midnight-800/70 border border-midnight-700/80 hover:border-gold-500/70 p-4 text-center flex flex-col items-center justify-center space-y-2 transition-all hover:shadow-lg hover:shadow-gold-500/30"
                >
                  <i class="ti ti-device-gamepad-2 text-3xl text-gold-400"></i>
                  <div class="font-medium text-slate-200 text-sm inter-font">
                    潮玩手办
                  </div>
                </a>
                <a
                  href="#"
                  onclick="filterByCategory('宠物')"
                  class="gem-btn rounded-xl bg-midnight-800/70 border border-midnight-700/80 hover:border-green-500/70 p-4 text-center flex flex-col items-center justify-center space-y-2 transition-all hover:shadow-lg hover:shadow-green-500/30"
                >
                  <i class="ti ti-paw text-3xl text-green-400"></i>
                  <div class="font-medium text-slate-200 text-sm inter-font">
                    萌宠定制
                  </div>
                </a>
                <a
                  href="#"
                  onclick="filterByCategory('更多')"
                  class="gem-btn rounded-xl bg-midnight-800/70 border border-midnight-700/80 hover:border-purple-500/70 p-4 text-center flex flex-col items-center justify-center space-y-2 transition-all hover:shadow-lg hover:shadow-purple-500/30"
                >
                  <i class="ti ti-apps text-3xl text-purple-400"></i>
                  <div class="font-medium text-slate-200 text-sm inter-font">
                    更多惊喜
                  </div>
                </a>
              </div>
            </div>

            <div class="rounded-xl overflow-hidden shadow-lg">
              <div
                class="bg-cover bg-center aspect-32/9"
                style="
                  background-image: url(https://cdn.sa.net/2025/06/03/xQtSvAOUIWDrnz6.jpg);
                "
              >
                <div
                  class="w-full h-full bg-gradient-to-r from-black/80 via-black/40 to-transparent p-5 flex flex-col justify-center"
                >
                  <h3 class="font-bold text-xl text-white font-playfair mb-1">
                    限量联名定制
                  </h3>
                  <p class="text-xs text-slate-200/90 inter-font">
                    艺术家合作款，限时发售，不容错过。
                  </p>
                </div>
              </div>
            </div>

            <div>
              <div class="flex justify-between items-center mb-4">
                <h2 class="text-lg font-semibold text-gold-300 font-playfair">
                  热门推荐
                </h2>
                <div
                  class="text-xs text-slate-400 flex items-center inter-font"
                >
                  排序 <i class="ti ti-arrows-sort ml-1 text-sm"></i>
                </div>
              </div>

              <div class="grid grid-cols-2 gap-4">
                <!-- Product card example -->
                <div
                  class="bg-midnight-800/50 rounded-xl border border-midnight-700/70 overflow-hidden group p-2"
                >
                  <div class="relative">
                    <div
                      class="product-card-image"
                      style="
                        background-image: url(https://cdn.sa.net/2025/06/03/78LG6JqmkU5WtCr.jpg);
                      "
                    >
                      <button
                        onclick="toggleLike(this, 401)"
                        class="absolute top-2 right-2 p-1.5 rounded-full bg-black/50 hover:bg-ruby/80 transition-all text-white"
                      >
                        <i class="ti ti-heart text-base"></i>
                      </button>
                      <div
                        class="absolute bottom-2 left-2 bg-ruby/80 text-white px-2 py-0.5 rounded-sm text-xs font-semibold inter-font"
                      >
                        折扣
                      </div>
                    </div>
                    <div class="pt-2 inter-font">
                      <div
                        class="text-sm font-medium text-slate-300 truncate group-hover:text-gold-400 transition"
                      >
                        星空定制手链
                      </div>
                      <div class="flex justify-between items-center mt-1">
                        <span class="text-base text-amber-400 font-semibold"
                          >¥650</span
                        >
                        <del class="text-xs text-slate-500">¥990</del>
                      </div>
                    </div>
                  </div>
                </div>
                <div
                  class="bg-midnight-800/50 rounded-xl border border-midnight-700/70 overflow-hidden group p-2"
                >
                  <div class="relative">
                    <div
                      class="product-card-image"
                      style="
                        background-image: url(https://cdn.sa.net/2025/06/03/ngVtJWckCw4qxo5.jpg);
                      "
                    >
                      <button
                        onclick="toggleLike(this, 402)"
                        class="absolute top-2 right-2 p-1.5 rounded-full bg-black/50 hover:bg-ruby/80 transition-all text-white"
                      >
                        <i class="ti ti-heart text-base"></i>
                      </button>
                    </div>
                    <div class="pt-2 inter-font">
                      <div
                        class="text-sm font-medium text-slate-300 truncate group-hover:text-gold-400 transition"
                      >
                        柴犬毛毡DIY套装
                      </div>
                      <div class="text-base text-amber-400 font-semibold mt-1">
                        ¥580
                      </div>
                    </div>
                  </div>
                </div>
                <div
                  class="bg-midnight-800/50 rounded-xl border border-midnight-700/70 overflow-hidden group p-2"
                >
                  <div class="relative">
                    <div
                      class="product-card-image"
                      style="
                        background-image: url(https://cdn.sa.net/2025/06/03/vqTagyotSnsrLz3.jpg);
                      "
                    >
                      <button
                        onclick="toggleLike(this, 403)"
                        class="absolute top-2 right-2 p-1.5 rounded-full bg-black/50 hover:bg-ruby/80 transition-all text-white"
                      >
                        <i class="ti ti-heart text-base"></i>
                      </button>
                      <div
                        class="absolute bottom-2 left-2 bg-sapphire/80 text-white px-2 py-0.5 rounded-sm text-xs font-semibold inter-font"
                      >
                        新品
                      </div>
                    </div>
                    <div class="pt-2 inter-font">
                      <div
                        class="text-sm font-medium text-slate-300 truncate group-hover:text-gold-400 transition"
                      >
                        幻彩星空系列贴纸
                      </div>
                      <div class="text-base text-amber-400 font-semibold mt-1">
                        ¥85
                      </div>
                    </div>
                  </div>
                </div>
                <div
                  class="bg-midnight-800/50 rounded-xl border border-midnight-700/70 overflow-hidden group p-2"
                >
                  <div class="relative">
                    <div
                      class="product-card-image"
                      style="
                        background-image: url(https://cdn.sa.net/2025/06/03/BUincvL9elPkQw4.jpg);
                      "
                    >
                      <button
                        onclick="toggleLike(this, 404)"
                        class="absolute top-2 right-2 p-1.5 rounded-full bg-black/50 hover:bg-ruby/80 transition-all text-white"
                      >
                        <i
                          class="ti ti-heart-filled text-red-500 text-base"
                        ></i>
                      </button>
                    </div>
                    <div class="pt-2 inter-font">
                      <div
                        class="text-sm font-medium text-slate-300 truncate group-hover:text-gold-400 transition"
                      >
                        印象派定制画作
                      </div>
                      <div class="text-base text-amber-400 font-semibold mt-1">
                        ¥1,280
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Profile Page (Structure Only) -->
        <div id="profile-page" class="page custom-scrollbar">
          <div class="flex-shrink-0">
            <div
              class="jewel-border p-4 flex justify-between items-center bg-gradient-to-r from-midnight-900/80 to-midnight-800/70 backdrop-blur-sm sticky top-0 z-10"
            >
              <div
                class="text-xl font-bold tracking-wide text-gold-400 flex items-center font-playfair"
              >
                <i class="ti ti-user-circle mr-2.5 text-gold-300 text-2xl"></i>
                我的账户
              </div>
              <button
                class="p-2 rounded-full bg-midnight-700/60 hover:bg-midnight-600/80 transition-all border border-midnight-600 hover:border-gold-500/70 gem-btn"
              >
                <i class="ti ti-settings text-gold-400 text-xl"></i>
              </button>
            </div>
          </div>
          <div
            class="flex-1 overflow-y-auto custom-scrollbar p-4 space-y-6 pb-8"
          >
            <div
              class="p-5 bg-gradient-to-br from-slate-800/70 via-midnight-800/50 to-slate-800/70 m-1 rounded-xl border border-midnight-700/80 shadow-xl"
            >
              <div class="flex items-center">
                <div
                  class="w-20 h-20 rounded-full bg-cover bg-center border-2 border-gold-500/70 shadow-lg"
                  style="
                    background-image: url(https://cdn.sa.net/2025/06/03/Uh6gBKEQajsnmlN.jpg);
                  "
                ></div>
                <div class="ml-5">
                  <h2 class="text-2xl font-bold text-gold-200 font-playfair">
                    张婉琪
                  </h2>
                  <p class="text-sm text-slate-400 inter-font mt-1">
                    <span class="vip-badge">VIP 钻石会员</span> | 加入于:
                    2025-02-01
                  </p>
                </div>
              </div>
            </div>

            <div
              class="bg-midnight-800/60 border border-midnight-700/70 rounded-xl p-4 mx-1 shadow-lg"
            >
              <div class="text-center mb-3">
                <i class="ti ti-sparkles text-2xl text-gold-300"></i>
                <h3
                  class="text-base font-semibold text-slate-200 mt-1 mb-1 font-playfair"
                >
                  2025年6月2日 · 今日寄语
                </h3>
              </div>
              <p
                class="text-center text-slate-300/90 mb-3 text-sm inter-font italic"
              >
                "定制独一无二的饰品，于腕间与颈上，镌刻今日的焦点与永恒。"
              </p>
              <div class="flex justify-center mt-4">
                <div
                  class="flex items-center px-5 py-2 bg-slate-800/70 rounded-full border border-midnight-600/50 shadow-inner"
                >
                  <span class="text-xs text-slate-300 mr-3 inter-font"
                    >幸运指数</span
                  >
                  <div class="relative flex items-center">
                    <div
                      class="w-10 h-10 rounded-full bg-gradient-to-br from-emerald-500 to-teal-400 flex items-center justify-center text-white text-sm font-bold shadow-md inter-font"
                    >
                      4.5
                    </div>
                    <span
                      class="absolute -top-1.5 -right-1.5 text-lg text-emerald-400"
                      ><i class="ti ti-arrow-big-up-line"></i
                    ></span>
                  </div>
                  <div class="ml-4 text-xs inter-font">
                    <div class="text-slate-400">幸运色:</div>
                    <span class="text-emerald-400 font-semibold">祖母绿</span>
                  </div>
                </div>
              </div>
            </div>

            <div class="mx-1">
              <div class="flex justify-between items-center mb-4">
                <h2 class="text-lg font-semibold text-gold-300 font-playfair">
                  我的订单
                </h2>
                <button
                  onclick="switchPage('order-page')"
                  class="text-xs text-slate-400 hover:text-gold-400 flex items-center inter-font"
                >
                  全部订单 <i class="ti ti-chevron-right ml-1 text-sm"></i>
                </button>
              </div>
              <div class="grid grid-cols-5 gap-3 text-center inter-font">
                <a
                  href="#"
                  onclick="switchPage('order-page', { filter: 'pending_payment' })"
                  class="flex flex-col items-center p-2 bg-midnight-800/50 hover:bg-midnight-700/70 rounded-lg border border-transparent hover:border-gold-500/30 transition-all"
                >
                  <div
                    class="w-12 h-12 rounded-full flex items-center justify-center mb-1.5 bg-slate-700/50"
                  >
                    <i class="ti ti-credit-card text-xl text-amber-400"></i>
                  </div>
                  <span class="text-xs text-slate-300">待付款</span>
                </a>
                <a
                  href="#"
                  onclick="switchPage('order-page', { filter: 'to_be_shipped' })"
                  class="flex flex-col items-center p-2 bg-midnight-800/50 hover:bg-midnight-700/70 rounded-lg border border-transparent hover:border-gold-500/30 transition-all"
                >
                  <div
                    class="w-12 h-12 rounded-full flex items-center justify-center mb-1.5 bg-slate-700/50"
                  >
                    <i class="ti ti-box-seam text-xl text-sapphire-300"></i>
                  </div>
                  <span class="text-xs text-slate-300">待发货</span>
                </a>
                <a
                  href="#"
                  onclick="switchPage('order-page', { filter: 'in_transit' })"
                  class="flex flex-col items-center p-2 bg-midnight-800/50 hover:bg-midnight-700/70 rounded-lg border border-transparent hover:border-gold-500/30 transition-all"
                >
                  <div
                    class="w-12 h-12 rounded-full flex items-center justify-center mb-1.5 bg-slate-700/50"
                  >
                    <i
                      class="ti ti-truck-delivery text-xl text-emerald-300"
                    ></i>
                  </div>
                  <span class="text-xs text-slate-300">待收货</span>
                </a>
                <a
                  href="#"
                  onclick="switchPage('order-page', { filter: 'to_be_reviewed' })"
                  class="flex flex-col items-center p-2 bg-midnight-800/50 hover:bg-midnight-700/70 rounded-lg border border-transparent hover:border-gold-500/30 transition-all"
                >
                  <div
                    class="w-12 h-12 rounded-full flex items-center justify-center mb-1.5 bg-slate-700/50"
                  >
                    <i class="ti ti-star text-xl text-purple-300"></i>
                  </div>
                  <span class="text-xs text-slate-300">待评价</span>
                </a>
                <a
                  href="#"
                  onclick="switchPage('order-page', { filter: 'refund_after_sales' })"
                  class="flex flex-col items-center p-2 bg-midnight-800/50 hover:bg-midnight-700/70 rounded-lg border border-transparent hover:border-gold-500/30 transition-all"
                >
                  <div
                    class="w-12 h-12 rounded-full flex items-center justify-center mb-1.5 bg-slate-700/50"
                  >
                    <i class="ti ti-receipt-refund text-xl text-ruby-300"></i>
                  </div>
                  <span class="text-xs text-slate-300">退款/售后</span>
                </a>
              </div>
            </div>

            <div class="mx-1">
              <h2
                class="text-lg font-semibold mb-4 text-gold-300 font-playfair"
              >
                我的定制
              </h2>
              <div
                class="bg-midnight-800/60 rounded-xl border border-midnight-700/70 p-4 mb-4 shadow-md"
              >
                <div class="flex justify-between items-center mb-3">
                  <div class="flex items-center">
                    <i
                      class="ti ti-heart-bolt text-2xl mr-2.5 text-ruby-400"
                    ></i>
                    <h3 class="font-semibold text-slate-100 font-playfair">
                      心愿清单
                    </h3>
                  </div>
                  <button
                    class="text-sm text-slate-400 hover:text-gold-400 flex items-center inter-font"
                  >
                    12件 <i class="ti ti-chevron-right ml-1"></i>
                  </button>
                </div>
                <div class="grid grid-cols-3 gap-3">
                  <div
                    class="product-card-image rounded-md"
                    style="
                      background-image: url(https://cdn.sa.net/2025/06/03/UJbWPxGvfeLmTF3.jpg);
                    "
                  ></div>
                  <div
                    class="product-card-image rounded-md"
                    style="
                      background-image: url(https://cdn.sa.net/2025/06/03/KAoJ9DPMX42QxaN.jpg);
                    "
                  ></div>
                  <div
                    class="product-card-image rounded-md"
                    style="
                      background-image: url(https://cdn.sa.net/2025/06/03/5jI6fbX7ouhApyN.jpg);
                    "
                  ></div>
                </div>
              </div>
              <div
                class="bg-midnight-800/60 rounded-xl border border-midnight-700/70 p-4 shadow-md"
              >
                <div class="flex justify-between items-center">
                  <div class="flex items-center">
                    <i
                      class="ti ti-building-store text-2xl mr-2.5 text-amber-400"
                    ></i>
                    <h3 class="font-semibold text-slate-100 font-playfair">
                      收藏店铺
                    </h3>
                  </div>
                  <button
                    class="text-sm text-slate-400 hover:text-gold-400 flex items-center inter-font"
                  >
                    4家 <i class="ti ti-chevron-right ml-1"></i>
                  </button>
                </div>
              </div>
            </div>

            <div class="mx-1">
              <h2
                class="text-lg font-semibold mb-3 text-gold-300 font-playfair"
              >
                最近浏览店铺
              </h2>
              <div class="space-y-3">
                <div
                  class="bg-midnight-800/60 rounded-xl border border-midnight-700/70 p-3.5 shadow-md flex justify-between items-center"
                >
                  <div class="flex items-center">
                    <div
                      class="shop-logo-image mr-3.5"
                      style="
                        background-image: url(https://cdn.sa.net/2025/06/03/6QDRWJMGO8eqLyw.jpg);
                      "
                    ></div>
                    <div>
                      <div class="font-semibold text-slate-100 font-playfair">
                        潮玩工场
                      </div>
                      <div
                        class="flex items-center text-xs text-slate-400 inter-font mt-0.5"
                      >
                        <i class="ti ti-star-filled text-amber-400 mr-1"></i>4.7
                      </div>
                    </div>
                  </div>
                  <button
                    onclick="switchPage('store-page', {storeId: 3})"
                    class="text-xs py-1.5 px-4 bg-transparent border border-gold-500/80 text-gold-400 rounded-full hover:bg-gold-500/20 transition-colors inter-font"
                  >
                    访问
                  </button>
                </div>
                <div
                  class="bg-midnight-800/60 rounded-xl border border-midnight-700/70 p-3.5 shadow-md flex justify-between items-center"
                >
                  <div class="flex items-center">
                    <div
                      class="shop-logo-image mr-3.5"
                      style="
                        background-image: url(https://cdn.sa.net/2025/06/03/P6xNEMQVGqdusbc.jpg);
                      "
                    ></div>
                    <div>
                      <div class="font-semibold text-slate-100 font-playfair">
                        星光艺术坊
                      </div>
                      <div
                        class="flex items-center text-xs text-slate-400 inter-font mt-0.5"
                      >
                        <i class="ti ti-star-filled text-amber-400 mr-1"></i>4.8
                      </div>
                    </div>
                  </div>
                  <button
                    onclick="switchPage('store-page', {storeId: 1})"
                    class="text-xs py-1.5 px-4 bg-transparent border border-gold-500/80 text-gold-400 rounded-full hover:bg-gold-500/20 transition-colors inter-font"
                  >
                    访问
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Custom Product Page (Placeholder - To be implemented) -->
        <div id="custom-product-page" class="page custom-scrollbar">
          <div class="flex-shrink-0">
            <div
              class="jewel-border p-4 flex items-center bg-gradient-to-r from-midnight-900/80 to-midnight-800/70 backdrop-blur-sm sticky top-0 z-10"
            >
              <button
                class="p-2 -ml-2 rounded-full hover:bg-midnight-700/50"
                onclick="goBack()"
              >
                <i class="ti ti-chevron-left text-gold-300 text-2xl"></i>
              </button>
              <h2
                id="custom-product-title"
                class="text-lg font-semibold text-gold-300 flex-1 text-center font-playfair"
              >
                定制商品
              </h2>
              <button
                class="p-2 -mr-2 rounded-full hover:bg-midnight-700/50"
                onclick="toggleLike(this, currentCustomProductId, true)"
              >
                <i
                  id="custom-product-like-icon"
                  class="ti ti-heart text-xl text-white"
                ></i>
              </button>
            </div>
          </div>
          <div
            id="custom-product-content"
            class="flex-1 overflow-y-auto custom-scrollbar p-4 space-y-6 pb-24"
          >
            <!-- Product image -->
            <div
              class="relative aspect-square rounded-xl overflow-hidden shadow-2xl border border-midnight-700/50"
            >
              <div
                id="custom-product-image"
                class="bg-cover bg-center w-full h-full"
                style="
                  background-image: url(https://cdn.sa.net/2025/06/03/UJbWPxGvfeLmTF3.jpg);
                "
              ></div>
              <div
                class="absolute bottom-4 left-4 bg-black/70 backdrop-blur-sm px-4 py-2 rounded-lg shadow-lg"
              >
                <span
                  id="custom-product-price"
                  class="text-xl text-amber-300 font-bold font-inter"
                  >¥1,280.00</span
                >
                <del
                  id="custom-product-original-price"
                  class="text-sm text-slate-400 ml-2 font-inter"
                  >¥1,880.00</del
                >
              </div>
            </div>

            <!-- Custom options -->
            <div class="space-y-6">
              <div
                class="bg-midnight-800/50 p-4 rounded-lg border border-midnight-700/60"
              >
                <h3
                  class="text-base font-semibold text-gold-200 mb-3 flex items-center font-playfair"
                >
                  <i class="ti ti-ruler-measure mr-2 text-lg text-gold-400"></i
                  >选择尺寸
                </h3>
                <div
                  id="custom-options-size"
                  class="grid grid-cols-3 gap-2 inter-font"
                >
                  <button
                    data-option="size"
                    data-value="S"
                    data-price-adjust="0"
                    class="custom-option-btn py-2.5 bg-slate-700/50 rounded-md border border-slate-600 hover:border-amber-500/70 hover:bg-amber-500/10 text-slate-300 text-xs transition"
                  >
                    小号 (12-14mm)
                  </button>
                  <button
                    data-option="size"
                    data-value="M"
                    data-price-adjust="50"
                    class="custom-option-btn py-2.5 bg-slate-700/50 rounded-md border border-slate-600 hover:border-amber-500/70 hover:bg-amber-500/10 text-slate-300 text-xs transition"
                  >
                    中号 (15-18mm)
                    <span class="text-amber-400 text-[10px]">+¥50</span>
                  </button>
                  <button
                    data-option="size"
                    data-value="L"
                    data-price-adjust="100"
                    class="custom-option-btn py-2.5 bg-slate-700/50 rounded-md border border-slate-600 hover:border-amber-500/70 hover:bg-amber-500/10 text-slate-300 text-xs transition"
                  >
                    大号 (19-22mm)
                    <span class="text-amber-400 text-[10px]">+¥100</span>
                  </button>
                </div>
              </div>

              <div
                class="bg-midnight-800/50 p-4 rounded-lg border border-midnight-700/60"
              >
                <h3
                  class="text-base font-semibold text-gold-200 mb-3 flex items-center font-playfair"
                >
                  <i class="ti ti-palette mr-2 text-lg text-gold-400"></i
                  >选择宝石颜色
                </h3>
                <div
                  id="custom-options-color"
                  class="flex overflow-x-auto custom-scrollbar pb-2 space-x-3 inter-font"
                >
                  <button
                    data-option="color"
                    data-value="black"
                    data-price-adjust="0"
                    class="custom-option-btn flex-shrink-0 flex flex-col items-center space-y-1 p-1 rounded-md hover:bg-amber-500/10"
                  >
                    <div
                      class="w-12 h-12 rounded-full bg-slate-900 border-2 border-slate-700"
                    ></div>
                    <div class="text-xs text-slate-300">经典黑</div>
                  </button>
                  <button
                    data-option="color"
                    data-value="blue"
                    data-price-adjust="120"
                    class="custom-option-btn flex-shrink-0 flex flex-col items-center space-y-1 p-1 rounded-md hover:bg-amber-500/10"
                  >
                    <div
                      class="w-12 h-12 rounded-full bg-sapphire border-2 border-slate-700"
                    ></div>
                    <div class="text-xs text-slate-300">
                      宝石蓝
                      <span class="text-amber-400 text-[10px]">+¥120</span>
                    </div>
                  </button>
                  <button
                    data-option="color"
                    data-value="green"
                    data-price-adjust="150"
                    class="custom-option-btn flex-shrink-0 flex flex-col items-center space-y-1 p-1 rounded-md hover:bg-amber-500/10"
                  >
                    <div
                      class="w-12 h-12 rounded-full bg-emerald border-2 border-slate-700"
                    ></div>
                    <div class="text-xs text-slate-300">
                      祖母绿
                      <span class="text-amber-400 text-[10px]">+¥150</span>
                    </div>
                  </button>
                  <button
                    data-option="color"
                    data-value="rosegold"
                    data-price-adjust="80"
                    class="custom-option-btn flex-shrink-0 flex flex-col items-center space-y-1 p-1 rounded-md hover:bg-amber-500/10"
                  >
                    <div
                      class="w-12 h-12 rounded-full bg-rose-gold border-2 border-slate-700"
                    ></div>
                    <div class="text-xs text-slate-300">
                      玫瑰金
                      <span class="text-amber-400 text-[10px]">+¥80</span>
                    </div>
                  </button>
                  <button
                    data-option="color"
                    data-value="purple"
                    data-price-adjust="100"
                    class="custom-option-btn flex-shrink-0 flex flex-col items-center space-y-1 p-1 rounded-md hover:bg-amber-500/10"
                  >
                    <div
                      class="w-12 h-12 rounded-full bg-amethyst border-2 border-slate-700"
                    ></div>
                    <div class="text-xs text-slate-300">
                      星空紫
                      <span class="text-amber-400 text-[10px]">+¥100</span>
                    </div>
                  </button>
                </div>
              </div>
              <div
                class="bg-midnight-800/50 p-4 rounded-lg border border-midnight-700/60"
              >
                <h3
                  class="text-base font-semibold text-gold-200 mb-3 flex items-center font-playfair"
                >
                  <i class="ti ti-texture mr-2 text-lg text-gold-400"></i
                  >选择背景纹理
                </h3>
                <div
                  id="custom-options-background"
                  class="grid grid-cols-3 gap-3 inter-font"
                >
                  <button
                    data-option="background"
                    data-value="starry"
                    data-image="https://cdn.sa.net/2025/06/03/c7x3oHqTtGIl6v5.jpg"
                    data-price-adjust="80"
                    class="custom-option-btn relative aspect-square rounded-md border border-slate-600 overflow-hidden hover:border-amber-500/70 group"
                  >
                    <div
                      class="bg-cover bg-center w-full h-full transition-transform group-hover:scale-105"
                      style="
                        background-image: url(https://cdn.sa.net/2025/06/03/c7x3oHqTtGIl6v5.jpg);
                      "
                    ></div>
                    <div
                      class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent flex flex-col justify-end p-1.5"
                    >
                      <div class="text-xs text-white text-center">
                        星空
                        <span class="text-amber-300 text-[10px]">+¥80</span>
                      </div>
                    </div>
                  </button>
                  <button
                    data-option="background"
                    data-value="water"
                    data-image="https://cdn.sa.net/2025/06/03/e3hYXmMJU85Zpqx.jpg"
                    data-price-adjust="60"
                    class="custom-option-btn relative aspect-square rounded-md border border-slate-600 overflow-hidden hover:border-amber-500/70 group"
                  >
                    <div
                      class="bg-cover bg-center w-full h-full transition-transform group-hover:scale-105"
                      style="
                        background-image: url(https://cdn.sa.net/2025/06/03/e3hYXmMJU85Zpqx.jpg);
                      "
                    ></div>
                    <div
                      class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent flex flex-col justify-end p-1.5"
                    >
                      <div class="text-xs text-white text-center">
                        水纹
                        <span class="text-amber-300 text-[10px]">+¥60</span>
                      </div>
                    </div>
                  </button>
                  <button
                    data-option="background"
                    data-value="marble"
                    data-image="https://cdn.sa.net/2025/06/03/S1g4tyCjrND9h6O.jpg"
                    data-price-adjust="70"
                    class="custom-option-btn relative aspect-square rounded-md border border-slate-600 overflow-hidden hover:border-amber-500/70 group"
                  >
                    <div
                      class="bg-cover bg-center w-full h-full transition-transform group-hover:scale-105"
                      style="
                        background-image: url(https://cdn.sa.net/2025/06/03/S1g4tyCjrND9h6O.jpg);
                      "
                    ></div>
                    <div
                      class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent flex flex-col justify-end p-1.5"
                    >
                      <div class="text-xs text-white text-center">
                        大理石
                        <span class="text-amber-300 text-[10px]">+¥70</span>
                      </div>
                    </div>
                  </button>
                </div>
              </div>

              <div
                class="bg-midnight-800/50 p-4 rounded-lg border border-midnight-700/60"
              >
                <h3
                  class="text-base font-semibold text-gold-200 mb-3 flex items-center font-playfair"
                >
                  <i
                    class="ti ti-vector-bezier-2 mr-2 text-lg text-gold-400"
                  ></i
                  >添加定制印花
                </h3>
                <div
                  id="custom-options-print"
                  class="grid grid-cols-3 gap-3 inter-font"
                >
                  <button
                    data-option="print"
                    data-value="geometric"
                    data-image="https://cdn.sa.net/2025/06/03/NLMPyviuVE5kWhD.jpg"
                    data-price-adjust="100"
                    class="custom-option-btn relative aspect-square rounded-md border border-slate-600 overflow-hidden hover:border-amber-500/70 group"
                  >
                    <div
                      class="bg-cover bg-center w-full h-full transition-transform group-hover:scale-105"
                      style="
                        background-image: url(https://cdn.sa.net/2025/06/03/NLMPyviuVE5kWhD.jpg);
                      "
                    ></div>
                    <div
                      class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent flex flex-col justify-end p-1.5"
                    >
                      <div class="text-xs text-white text-center">
                        几何图形
                        <span class="text-amber-300 text-[10px]">+¥100</span>
                      </div>
                    </div>
                  </button>
                  <button
                    data-option="print"
                    data-value="constellation"
                    data-image="https://cdn.sa.net/2025/06/03/BWS6zhcaYQvu8N2.jpg"
                    data-price-adjust="120"
                    class="custom-option-btn relative aspect-square rounded-md border border-slate-600 overflow-hidden hover:border-amber-500/70 group"
                  >
                    <div
                      class="bg-cover bg-center w-full h-full transition-transform group-hover:scale-105"
                      style="
                        background-image: url(https://cdn.sa.net/2025/06/03/BWS6zhcaYQvu8N2.jpg);
                      "
                    ></div>
                    <div
                      class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent flex flex-col justify-end p-1.5"
                    >
                      <div class="text-xs text-white text-center">
                        星座
                        <span class="text-amber-300 text-[10px]">+¥120</span>
                      </div>
                    </div>
                  </button>
                  <button
                    data-option="print"
                    data-value="custom_upload"
                    data-price-adjust="180"
                    class="custom-option-btn relative aspect-square rounded-md border-2 border-dashed border-slate-600 bg-slate-700/30 hover:border-amber-500/70 flex flex-col items-center justify-center text-slate-400 hover:text-amber-400 transition group"
                  >
                    <i class="ti ti-upload text-3xl mb-1"></i>
                    <div class="text-xs text-center">
                      自定义上传
                      <span class="block text-amber-400 text-[10px]"
                        >+¥180</span
                      >
                    </div>
                  </button>
                </div>
              </div>
            </div>

            <!-- Summary and CTA are in the fixed bar below -->
          </div>
          <!-- Fixed Bottom Bar for Custom Product Page -->
          <div
            class="fixed bottom-[70px] left-0 right-0 w-full max-w-md mx-auto bg-gradient-to-t from-midnight-900 via-midnight-900/95 to-midnight-900/80 backdrop-blur-sm border-t border-midnight-700/70 p-4 z-20 shadow-2xl"
          >
            <div class="border-t border-slate-700/50 pt-3">
              <div class="flex justify-between text-sm mb-1.5 inter-font">
                <span class="text-slate-300">定制附加</span>
                <span
                  id="customization-extra-price"
                  class="text-amber-300 font-medium"
                  >+ ¥0.00</span
                >
              </div>
              <div class="flex justify-between text-sm mb-3 inter-font">
                <span class="text-slate-300">预计工期</span>
                <span id="customization-lead-time" class="text-slate-300"
                  >7-10个工作日</span
                >
              </div>
              <div
                class="flex justify-between items-center pt-2 border-t border-slate-700/50"
              >
                <div class="inter-font">
                  <div
                    id="final-custom-price"
                    class="text-2xl text-amber-300 font-bold"
                  >
                    ¥1,280.00
                  </div>
                  <div
                    id="original-price-summary"
                    class="text-xs text-slate-500"
                  >
                    原价 ¥1,880.00
                  </div>
                </div>
                <button
                  onclick="addToCartCustomized()"
                  class="px-6 py-3 rounded-lg bg-gradient-to-r from-gold-500 to-amber-600 text-midnight-900 font-semibold text-sm hover:from-gold-600 hover:to-amber-700 transition-all gem-btn inter-font"
                >
                  加入购物车
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Store Page (Placeholder - To be implemented) -->
        <div id="store-page" class="page custom-scrollbar">
          <div class="flex-shrink-0">
            <div
              class="jewel-border p-4 flex items-center bg-gradient-to-r from-midnight-900/80 to-midnight-800/70 backdrop-blur-sm sticky top-0 z-20"
            >
              <button
                class="p-2 -ml-2 rounded-full hover:bg-midnight-700/50"
                onclick="goBack()"
              >
                <i class="ti ti-chevron-left text-gold-300 text-2xl"></i>
              </button>
              <div class="relative flex-grow mx-2">
                <input
                  type="text"
                  placeholder="搜索店铺内商品..."
                  class="w-full py-2 pl-10 pr-4 rounded-lg bg-midnight-800/70 border border-midnight-700/80 focus:border-gold-500/70 focus:ring-1 focus:ring-gold-500/50 focus:outline-none text-slate-200 placeholder-slate-500 inter-font text-sm transition-colors"
                />
                <i
                  class="ti ti-search absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 text-base"
                ></i>
              </div>
              <button class="p-2 -mr-2 rounded-full hover:bg-midnight-700/50">
                <i class="ti ti-dots-vertical text-gold-300 text-xl"></i>
              </button>
            </div>
          </div>
          <div
            id="store-content"
            class="flex-1 overflow-y-auto custom-scrollbar pb-8"
          >
            <!-- Store banner -->
            <div class="relative aspect-video">
              <div
                id="store-banner-image"
                class="bg-cover bg-center w-full h-full"
                style="
                  background-image: url(https://cdn.sa.net/2025/06/03/VxQ6FlsOIEUez41.jpg);
                "
              ></div>
              <div
                class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent"
              ></div>
              <div class="absolute bottom-0 left-0 right-0 p-5">
                <div class="flex items-end">
                  <div
                    id="store-logo-main"
                    class="w-20 h-20 rounded-xl bg-cover bg-center border-2 border-gold-500/70 shadow-xl"
                    style="
                      background-image: url(https://cdn.sa.net/2025/06/03/ohHz5MqL9WSnlYx.jpg);
                    "
                  ></div>
                  <div class="ml-4 mb-1">
                    <h2
                      id="store-name-main"
                      class="text-2xl font-bold text-white font-playfair"
                    >
                      匠心工坊
                    </h2>
                    <div
                      class="flex items-center text-sm text-slate-200/90 inter-font mt-1"
                    >
                      <i class="ti ti-star-filled text-amber-400 mr-1"></i>
                      <span id="store-rating-main">4.9</span>
                      <span class="mx-2 text-slate-500">|</span>
                      <i class="ti ti-mood-smile mr-1 text-emerald-400"></i>
                      <span id="store-positive-feedback">98% 好评</span>
                      <span class="mx-2 text-slate-500">|</span>
                      <span id="store-followers">2.5k 关注</span>
                    </div>
                  </div>
                </div>
              </div>
              <button
                id="store-follow-button-banner"
                onclick="toggleStoreFollow(this, currentStoreId)"
                class="absolute top-5 right-5 px-4 py-2 bg-gradient-to-r from-gold-500/90 to-amber-600/90 rounded-lg text-midnight-900 font-semibold text-xs hover:opacity-90 transition-opacity inter-font flex items-center shadow-lg"
              >
                <i class="ti ti-plus mr-1 text-sm"></i> 关注
              </button>
            </div>

            <div
              class="bg-midnight-800/50 mx-4 mt-[-20px] relative z-10 p-4 rounded-xl border border-midnight-700/60 shadow-2xl backdrop-blur-sm"
            >
              <div class="flex justify-between items-start mb-2">
                <div>
                  <div
                    id="store-slogan"
                    class="text-gold-200 font-semibold font-playfair"
                  >
                    匠心定制 · 艺术典藏
                  </div>
                  <div
                    id="store-description-short"
                    class="text-xs text-slate-400/90 inter-font mt-0.5"
                  >
                    专注于高品质手工定制饰品与艺术品。
                  </div>
                </div>
                <span
                  id="store-status-badge"
                  class="text-xs text-emerald-400 bg-emerald-900/50 px-2.5 py-1 rounded-full font-semibold inter-font"
                  >营业中</span
                >
              </div>
              <div
                id="store-full-description"
                class="text-xs text-slate-300/80 inter-font leading-relaxed line-clamp-2 mb-3"
              >
                设计师团队源自欧洲顶尖艺术设计学院，每件作品均经过精心设计与纯手工打磨。我们承诺定制周期为7-14个工作日，并支持30天无理由退换货服务，确保您的购物体验无忧。
              </div>
              <div class="mt-3 flex space-x-3">
                <button
                  class="text-xs py-1.5 px-3 border border-slate-600/80 rounded-full flex items-center text-slate-300 hover:border-gold-500/50 hover:text-gold-400 transition inter-font"
                >
                  <i class="ti ti-info-circle mr-1.5 text-sm"></i> 店铺详情
                </button>
                <button
                  class="text-xs py-1.5 px-3 border border-slate-600/80 rounded-full flex items-center text-slate-300 hover:border-gold-500/50 hover:text-gold-400 transition inter-font"
                >
                  <i class="ti ti-message-circle mr-1.5 text-sm"></i> 联系客服
                </button>
              </div>
            </div>

            <div class="px-4 mt-5">
              <div
                id="store-categories-tabs"
                class="flex overflow-x-auto custom-scrollbar pb-2 space-x-3 border-b border-midnight-700/50 mb-4 inter-font"
              >
                <button
                  data-category="all"
                  class="store-category-tab flex-shrink-0 px-4 py-2 text-sm rounded-t-md text-gold-400 border-b-2 border-gold-500 font-semibold"
                >
                  全部商品
                </button>
                <button
                  data-category="hot"
                  class="store-category-tab flex-shrink-0 px-4 py-2 text-sm text-slate-400 hover:text-gold-400 transition"
                >
                  热门推荐
                </button>
                <button
                  data-category="new"
                  class="store-category-tab flex-shrink-0 px-4 py-2 text-sm text-slate-400 hover:text-gold-400 transition"
                >
                  最新上架
                </button>
                <button
                  data-category="discount"
                  class="store-category-tab flex-shrink-0 px-4 py-2 text-sm text-slate-400 hover:text-gold-400 transition"
                >
                  折扣专区
                </button>
                <button
                  data-category="jewelry"
                  class="store-category-tab flex-shrink-0 px-4 py-2 text-sm text-slate-400 hover:text-gold-400 transition"
                >
                  奢华饰品
                </button>
                <button
                  data-category="art"
                  class="store-category-tab flex-shrink-0 px-4 py-2 text-sm text-slate-400 hover:text-gold-400 transition"
                >
                  艺术画作
                </button>
              </div>
            </div>

            <div id="store-products-grid" class="px-4 grid grid-cols-2 gap-4">
              <!-- Store products will be populated here by JS -->
              <div
                class="bg-midnight-800/50 rounded-xl border border-midnight-700/70 overflow-hidden group p-2"
              >
                <div class="relative">
                  <div
                    class="product-card-image"
                    style="
                      background-image: url(https://cdn.sa.net/2025/06/03/5jI6fbX7ouhApyN.jpg);
                    "
                  >
                    <button
                      onclick="toggleLike(this, 501)"
                      class="absolute top-2 right-2 p-1.5 rounded-full bg-black/50 hover:bg-ruby/80 transition-all text-white"
                    >
                      <i class="ti ti-heart text-base"></i>
                    </button>
                    <div
                      class="absolute bottom-2 left-2 bg-ruby/80 text-white px-2 py-0.5 rounded-sm text-xs font-semibold inter-font"
                    >
                      热卖
                    </div>
                  </div>
                  <div class="pt-2 inter-font">
                    <div
                      class="text-sm font-medium text-slate-300 truncate group-hover:text-gold-400 transition"
                    >
                      红宝石镶钻耳环
                    </div>
                    <div class="flex justify-between items-center mt-1">
                      <span class="text-base text-amber-400 font-semibold"
                        >¥1,580</span
                      >
                      <del class="text-xs text-slate-500">¥2,080</del>
                    </div>
                  </div>
                </div>
              </div>
              <div
                class="bg-midnight-800/50 rounded-xl border border-midnight-700/70 overflow-hidden group p-2"
              >
                <div class="relative">
                  <div
                    class="product-card-image"
                    style="
                      background-image: url(https://cdn.sa.net/2025/06/03/8uP9tYbvrI5yOdl.jpg);
                    "
                  >
                    <button
                      onclick="toggleLike(this, 502)"
                      class="absolute top-2 right-2 p-1.5 rounded-full bg-black/50 hover:bg-ruby/80 transition-all text-white"
                    >
                      <i class="ti ti-heart text-base"></i>
                    </button>
                    <div
                      class="absolute bottom-2 left-2 bg-emerald/80 text-white px-2 py-0.5 rounded-sm text-xs font-semibold inter-font"
                    >
                      新品
                    </div>
                  </div>
                  <div class="pt-2 inter-font">
                    <div
                      class="text-sm font-medium text-slate-300 truncate group-hover:text-gold-400 transition"
                    >
                      孔雀石复古吊坠
                    </div>
                    <div class="text-base text-amber-400 font-semibold mt-1">
                      ¥980
                    </div>
                  </div>
                </div>
              </div>
              <!-- More products... -->
            </div>
          </div>
        </div>

        <!-- Order Page (Placeholder - To be implemented) -->
        <div id="order-page" class="page custom-scrollbar">
          <!-- Order list content -->
          <div class="flex-shrink-0">
            <div
              class="jewel-border p-4 flex items-center bg-gradient-to-r from-midnight-900/80 to-midnight-800/70 backdrop-blur-sm sticky top-0 z-10"
            >
              <button
                class="p-2 -ml-2 rounded-full hover:bg-midnight-700/50"
                onclick="switchPage('profile-page')"
              >
                <i class="ti ti-chevron-left text-gold-300 text-2xl"></i>
              </button>
              <h2
                class="text-lg font-semibold text-gold-300 flex-1 text-center font-playfair"
              >
                我的订单
              </h2>
              <button class="p-2 -mr-2 rounded-full hover:bg-midnight-700/50">
                <i class="ti ti-filter text-gold-300 text-xl"></i>
              </button>
            </div>
          </div>
          <div class="flex-1 overflow-y-auto custom-scrollbar">
            <!-- Order status tabs -->
            <div
              class="border-b border-midnight-700/70 flex sticky top-0 bg-midnight-900/80 backdrop-blur-sm z-[5] inter-font"
            >
              <a
                href="#"
                data-filter="all"
                class="order-filter-tab flex-1 text-center py-3 text-sm active-tab"
                >全部</a
              >
              <a
                href="#"
                data-filter="pending_payment"
                class="order-filter-tab flex-1 text-center py-3 text-sm text-slate-400"
                >待付款</a
              >
              <a
                href="#"
                data-filter="to_be_shipped"
                class="order-filter-tab flex-1 text-center py-3 text-sm text-slate-400"
                >待发货</a
              >
              <a
                href="#"
                data-filter="in_transit"
                class="order-filter-tab flex-1 text-center py-3 text-sm text-slate-400"
                >待收货</a
              >
              <a
                href="#"
                data-filter="completed"
                class="order-filter-tab flex-1 text-center py-3 text-sm text-slate-400"
                >已完成</a
              >
            </div>

            <!-- Order list -->
            <div id="order-list-container" class="p-4 space-y-4">
              <!-- Order items will be dynamically inserted here -->
              <div
                class="bg-midnight-800/50 rounded-xl p-4 border border-midnight-700/70 shadow-md"
              >
                <div class="flex justify-between items-center mb-3">
                  <div class="flex items-center">
                    <span
                      class="text-sm font-medium text-slate-200 mr-2 font-inter"
                      >BAG20240522</span
                    >
                    <span
                      class="text-xs px-2 py-0.5 bg-amber-500/20 text-amber-400 rounded-full font-inter"
                      >配送中</span
                    >
                  </div>
                  <span class="text-xs text-slate-400 font-inter"
                    >2025-05-22</span
                  >
                </div>

                <div
                  class="flex items-start mb-3 cursor-pointer"
                  onclick="openOrderDetail('BAG20240522')"
                >
                  <div class="mr-3">
                    <div
                      class="bg-cover bg-center w-16 h-16 rounded-md border border-midnight-600"
                      style="
                        background-image: url(https://cdn.sa.net/2025/05/05/xJc5P8W2t3Hv4nS.jpg);
                      "
                    ></div>
                  </div>
                  <div class="flex-1">
                    <h3
                      class="font-semibold text-sm text-slate-100 font-playfair line-clamp-1"
                    >
                      蓝宝石定制对戒
                    </h3>
                    <p class="text-xs text-slate-400 font-inter line-clamp-1">
                      男女款各一件，加急定制
                    </p>
                    <p class="text-xs text-slate-500 font-inter mt-0.5">
                      共2件商品
                    </p>
                  </div>
                </div>

                <div class="border-t border-midnight-700/50 pt-3">
                  <div class="flex justify-between items-center">
                    <div class="flex items-center">
                      <span
                        class="text-amber-400 text-base font-semibold font-inter"
                        >¥12,600.00</span
                      >
                    </div>
                    <div class="flex space-x-2">
                      <button
                        onclick="openOrderDetail('BAG20240522')"
                        class="text-xs py-1.5 px-3 border border-slate-600 hover:border-slate-500 rounded-full text-slate-300 hover:text-white transition font-inter"
                      >
                        查看详情
                      </button>
                      <button
                        onclick="buyAgain('BAG20240522')"
                        class="text-xs py-1.5 px-3 rounded-full bg-gold-500/10 hover:bg-gold-500/20 text-gold-400 border border-gold-500/30 transition font-inter"
                      >
                        再次购买
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <div
                class="bg-midnight-800/50 rounded-xl p-4 border border-midnight-700/70 shadow-md"
              >
                <div class="flex justify-between items-center mb-3">
                  <div class="flex items-center">
                    <span
                      class="text-sm font-medium text-slate-200 mr-2 font-inter"
                      >BAG20240512</span
                    >
                    <span
                      class="text-xs px-2 py-0.5 bg-emerald-500/20 text-emerald-400 rounded-full font-inter"
                      >已完成</span
                    >
                  </div>
                  <span class="text-xs text-slate-400 font-inter"
                    >2025-05-12</span
                  >
                </div>

                <div
                  class="flex items-start mb-3 cursor-pointer"
                  onclick="openOrderDetail('BAG20240512')"
                >
                  <div class="mr-3">
                    <div
                      class="bg-cover bg-center w-16 h-16 rounded-md border border-midnight-600"
                      style="
                        background-image: url(https://cdn.sa.net/2025/05/01/L9d8wNqo7ZtF4rG.jpg);
                      "
                    ></div>
                  </div>
                  <div class="flex-1">
                    <h3
                      class="font-semibold text-sm text-slate-100 font-playfair line-clamp-1"
                    >
                      18K金镶钻手链
                    </h3>
                    <p class="text-xs text-slate-400 font-inter line-clamp-1">
                      定制刻字：Love Forever
                    </p>
                    <p class="text-xs text-slate-500 font-inter mt-0.5">
                      共1件商品
                    </p>
                  </div>
                </div>

                <div class="border-t border-midnight-700/50 pt-3">
                  <div class="flex justify-between items-center">
                    <div class="flex items-center">
                      <span
                        class="text-amber-400 text-base font-semibold font-inter"
                        >¥9,880.00</span
                      >
                    </div>
                    <div class="flex space-x-2">
                      <button
                        onclick="openOrderDetail('BAG20240512')"
                        class="text-xs py-1.5 px-3 border border-slate-600 hover:border-slate-500 rounded-full text-slate-300 hover:text-white transition font-inter"
                      >
                        评价订单
                      </button>
                      <button
                        onclick="buyAgain('BAG20240512')"
                        class="text-xs py-1.5 px-3 rounded-full bg-gold-500/10 hover:bg-gold-500/20 text-gold-400 border border-gold-500/30 transition font-inter"
                      >
                        再次购买
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Empty state example -->
              <div id="orders-empty-state" class="hidden text-center py-10">
                <i class="ti ti-mood-empty text-5xl text-slate-500 mb-4"></i>
                <p class="text-slate-400 font-inter">当前分类下暂无订单</p>
                <button
                  onclick="switchPage('home-page')"
                  class="mt-4 text-sm py-2 px-5 rounded-lg bg-gold-500/20 text-gold-300 border border-gold-500/40 hover:bg-gold-500/30 transition font-inter"
                >
                  去逛逛
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Order Detail Page (Placeholder - To be implemented) -->
        <div id="order-detail-page" class="page custom-scrollbar">
          <div class="flex-shrink-0">
            <div
              class="jewel-border p-4 flex items-center bg-gradient-to-r from-midnight-900/80 to-midnight-800/70 backdrop-blur-sm sticky top-0 z-10"
            >
              <button
                class="p-2 -ml-2 rounded-full hover:bg-midnight-700/50"
                onclick="switchPage('order-page')"
              >
                <i class="ti ti-chevron-left text-gold-300 text-2xl"></i>
              </button>
              <h2
                class="text-lg font-semibold text-gold-300 flex-1 text-center font-playfair"
              >
                订单详情
              </h2>
              <button class="p-2 -mr-2 rounded-full hover:bg-midnight-700/50">
                <i class="ti ti-message-circle-2 text-gold-300 text-xl"></i>
                <!--客服-->
              </button>
            </div>
          </div>
          <div class="flex-1 overflow-y-auto custom-scrollbar">
            <!-- Order status -->
            <div
              class="px-4 py-6 bg-gradient-to-r from-emerald-800/40 via-teal-800/30 to-emerald-800/40 border-b border-emerald-500/40"
            >
              <div class="text-center mb-4">
                <div
                  id="order-detail-status-text"
                  class="text-sm text-emerald-200 mb-1 font-inter"
                >
                  当前状态
                </div>
                <div
                  id="order-detail-status-main"
                  class="text-xl font-bold text-white font-playfair"
                >
                  正在配送途中
                </div>
              </div>

              <!-- Status timeline -->
              <div class="mt-6 max-w-xs mx-auto inter-font">
                <div class="relative">
                  <div
                    class="status-timeline py-1 pl-6 relative pb-4 completed-status"
                  >
                    <div class="text-sm font-medium text-slate-100">
                      订单提交
                    </div>
                    <div class="text-xs text-slate-400 mt-1">
                      2025-05-22 15:23:46
                    </div>
                  </div>
                  <div
                    class="status-timeline py-1 pl-6 relative pb-4 completed-status"
                  >
                    <div class="text-sm font-medium text-slate-100">
                      付款成功
                    </div>
                    <div class="text-xs text-slate-400 mt-1">
                      2025-05-22 15:28:12
                    </div>
                  </div>
                  <div
                    class="status-timeline py-1 pl-6 relative pb-4 active-status"
                  >
                    <div class="text-sm font-medium text-slate-100">
                      商家已发货
                    </div>
                    <div class="text-xs text-slate-400 mt-1">
                      2025-05-25 09:32:41
                    </div>
                  </div>
                  <div class="status-timeline py-1 pl-6 relative pb-4">
                    <div class="text-sm font-medium text-slate-100">
                      预计送达
                    </div>
                    <div class="text-xs text-slate-400 mt-1">2025-05-28 前</div>
                  </div>
                  <div class="status-timeline py-1 pl-6 relative">
                    <div class="text-sm font-medium text-slate-300">已完成</div>
                    <div class="text-xs text-slate-500 mt-1">
                      请确认收货后进行评价
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div
              class="p-4 border-b border-midnight-700/60 inter-font bg-midnight-800/30"
            >
              <h3
                class="font-semibold text-base text-gold-200 mb-3 font-playfair"
              >
                订单信息
              </h3>
              <div class="space-y-2 text-sm">
                <div class="flex justify-between">
                  <span class="text-slate-400">订单编号:</span>
                  <span id="detail-order-id" class="text-slate-200"
                    >BAG2024052278890</span
                  >
                </div>
                <div class="flex justify-between">
                  <span class="text-slate-400">下单时间:</span>
                  <span id="detail-order-time" class="text-slate-200"
                    >2025-05-22 15:23:46</span
                  >
                </div>
                <div class="flex justify-between">
                  <span class="text-slate-400">支付方式:</span>
                  <span id="detail-payment-method" class="text-slate-200"
                    >信用卡 (尾号9012)</span
                  >
                </div>
                <div class="flex justify-between">
                  <span class="text-slate-400">发票信息:</span>
                  <span id="detail-invoice-info" class="text-slate-200"
                    >个人 (电子发票)</span
                  >
                </div>
                <div class="flex justify-between">
                  <span class="text-slate-400">订单备注:</span>
                  <span
                    id="detail-order-remarks"
                    class="text-slate-200 truncate"
                    >包装精美些，附赠小礼物，谢谢！</span
                  >
                </div>
              </div>
            </div>
            <div
              class="p-4 border-b border-midnight-700/60 inter-font bg-midnight-800/30"
            >
              <h3
                class="font-semibold text-base text-gold-200 mb-3 font-playfair"
              >
                配送信息
              </h3>
              <div class="space-y-2 text-sm">
                <div class="flex justify-between">
                  <span class="text-slate-400">配送方式:</span>
                  <span id="detail-shipping-method" class="text-slate-200"
                    >顺丰快递 (特安)</span
                  >
                </div>
                <div class="flex justify-between">
                  <span class="text-slate-400">物流单号:</span>
                  <span id="detail-tracking-number" class="text-slate-200"
                    >SF102346799881
                    <i
                      class="ti ti-copy text-xs text-slate-500 hover:text-gold-400 cursor-pointer ml-1"
                    ></i
                  ></span>
                </div>
                <div class="flex justify-between">
                  <span class="text-slate-400">收 货 人:</span>
                  <span id="detail-recipient-name" class="text-slate-200"
                    >张婉琪 138****8888</span
                  >
                </div>
                <div>
                  <span class="text-slate-400">收货地址:</span>
                  <p
                    id="detail-shipping-address"
                    class="text-slate-200 mt-0.5 leading-relaxed"
                  >
                    上海市浦东新区张江高科技园区碧波路888号紫薇园8号楼2203室
                  </p>
                </div>
              </div>
            </div>
            <div class="p-4 border-b border-midnight-700/60 bg-midnight-800/30">
              <div class="flex items-center mb-3">
                <i class="ti ti-building-store text-lg text-amber-400 mr-2"></i>
                <span
                  id="detail-store-name"
                  class="font-semibold text-slate-100 font-playfair"
                  >匠心工坊</span
                >
                <i class="ti ti-chevron-right text-slate-500 ml-1 text-sm"></i>
              </div>

              <div id="order-detail-items-container" class="space-y-4">
                <!-- Item 1 -->
                <div class="flex items-start">
                  <div class="mr-3">
                    <div
                      class="bg-cover bg-center w-20 h-20 rounded-lg border border-midnight-600"
                      style="
                        background-image: url(https://cdn.sa.net/2025/05/05/xJc5P8W2t3Hv4nS.jpg);
                      "
                    ></div>
                  </div>
                  <div class="flex-1 inter-font">
                    <h3 class="font-medium text-sm text-slate-100 line-clamp-1">
                      蓝宝石定制对戒
                    </h3>
                    <p class="text-xs text-slate-400 mt-0.5">
                      女款 - 蓝宝石0.5ct | 18K金 | 尺寸13
                    </p>
                    <div class="mt-1.5 flex justify-between items-end">
                      <span class="text-sm text-amber-400 font-semibold"
                        >¥6,800.00</span
                      >
                      <span class="text-xs text-slate-400">x1</span>
                    </div>
                  </div>
                </div>
                <!-- Item 2 -->
                <div class="flex items-start">
                  <div class="mr-3">
                    <div
                      class="bg-cover bg-center w-20 h-20 rounded-lg border border-midnight-600"
                      style="
                        background-image: url(https://cdn.sa.net/2025/06/03/zTKH7ImpFNRx1lr.jpg);
                      "
                    ></div>
                  </div>
                  <div class="flex-1 inter-font">
                    <h3 class="font-medium text-sm text-slate-100 line-clamp-1">
                      蓝宝石定制对戒
                    </h3>
                    <p class="text-xs text-slate-400 mt-0.5">
                      男款 - 蓝宝石0.3ct | 18K金 | 尺寸20
                    </p>
                    <div class="mt-1.5 flex justify-between items-end">
                      <span class="text-sm text-amber-400 font-semibold"
                        >¥5,800.00</span
                      >
                      <span class="text-xs text-slate-400">x1</span>
                    </div>
                  </div>
                </div>
              </div>

              <div
                class="mt-4 pt-4 border-t border-midnight-700/50 inter-font space-y-1.5 text-sm"
              >
                <div class="flex justify-between">
                  <span class="text-slate-400">商品总额</span
                  ><span id="summary-subtotal" class="text-slate-200"
                    >¥12,600.00</span
                  >
                </div>
                <div class="flex justify-between">
                  <span class="text-slate-400">运费</span
                  ><span id="summary-shipping" class="text-slate-200"
                    >¥0.00</span
                  >
                </div>
                <div class="flex justify-between text-emerald-400">
                  <span class="text-emerald-400/80">VIP专属折扣</span
                  ><span id="summary-vip-discount">- ¥600.00</span>
                </div>
                <div class="flex justify-between text-emerald-400">
                  <span class="text-emerald-400/80">优惠券抵扣</span
                  ><span id="summary-coupon-discount">- ¥400.00</span>
                </div>
                <div class="h-px bg-midnight-700/50 my-2"></div>
                <div class="flex justify-between items-center">
                  <span class="text-slate-200 font-semibold">实付款</span>
                  <span
                    id="summary-total"
                    class="text-xl text-amber-300 font-bold"
                    >¥11,600.00</span
                  >
                </div>
              </div>
            </div>

            <div class="p-4 pb-20 inter-font bg-midnight-800/30">
              <h3
                class="font-semibold text-base text-gold-200 mb-3 font-playfair"
              >
                服务支持
              </h3>
              <div class="grid grid-cols-3 gap-3">
                <button
                  class="bg-slate-800/50 rounded-xl p-3 border border-midnight-700/70 flex flex-col items-center justify-center hover:border-gold-500/40 transition group"
                >
                  <i
                    class="ti ti-replace text-2xl text-slate-400 group-hover:text-gold-400 transition mb-1.5"
                  ></i>
                  <span
                    class="text-xs text-slate-300 group-hover:text-gold-300 transition"
                    >申请退换</span
                  >
                </button>
                <button
                  class="bg-slate-800/50 rounded-xl p-3 border border-midnight-700/70 flex flex-col items-center justify-center hover:border-gold-500/40 transition group"
                >
                  <i
                    class="ti ti-message-chatbot text-2xl text-slate-400 group-hover:text-gold-400 transition mb-1.5"
                  ></i>
                  <span
                    class="text-xs text-slate-300 group-hover:text-gold-300 transition"
                    >联系客服</span
                  >
                </button>
                <button
                  class="bg-slate-800/50 rounded-xl p-3 border border-midnight-700/70 flex flex-col items-center justify-center hover:border-gold-500/40 transition group"
                >
                  <i
                    class="ti ti-file-invoice text-2xl text-slate-400 group-hover:text-gold-400 transition mb-1.5"
                  ></i>
                  <span
                    class="text-xs text-slate-300 group-hover:text-gold-300 transition"
                    >查看发票</span
                  >
                </button>
              </div>
            </div>
          </div>
          <!-- Action buttons for Order Detail -->
          <div
            id="order-detail-actions"
            class="sticky bottom-[70px] border-t border-midnight-700/70 bg-midnight-900/90 backdrop-blur-sm p-3 flex justify-end space-x-3 inter-font"
          >
            <button
              class="py-2 px-4 rounded-full text-xs bg-slate-700/80 hover:bg-slate-600/80 border border-slate-600/50 text-slate-200 transition-all"
            >
              再次购买
            </button>
            <button
              class="py-2 px-4 rounded-full text-xs bg-gold-500/20 hover:bg-gold-500/30 text-gold-300 border border-gold-500/50 transition-all"
            >
              查看物流
            </button>
            <!-- Add more buttons based on order status, e.g., Confirm Receipt, Rate Order -->
          </div>
        </div>
      </div>

      <!-- Bottom navigation -->
      <div
        class="bottom-nav-container flex justify-between items-center px-3 py-2 bg-midnight-800/80 border-t border-midnight-700/70 backdrop-blur-md shadow-2xl flex-shrink-0"
      >
        <button
          id="nav-back"
          class="p-3 rounded-full hover:bg-midnight-700/70 transition-colors opacity-50 cursor-not-allowed"
          disabled
        >
          <i class="ti ti-arrow-left text-gold-400 text-2xl"></i>
        </button>

        <div
          class="flex bg-midnight-700/50 rounded-full border border-midnight-600/80 divide-x divide-midnight-600/80 overflow-hidden shadow-md"
        >
          <button
            id="nav-home"
            class="nav-btn p-3.5 hover:bg-midnight-600/70 text-slate-400 hover:text-gold-300 transition-colors tab-active"
            data-page="home-page"
          >
            <i class="ti ti-home-2 text-2xl"></i>
          </button>
          <button
            id="nav-category"
            class="nav-btn p-3.5 hover:bg-midnight-600/70 text-slate-400 hover:text-gold-300 transition-colors"
            data-page="category-page"
          >
            <i class="ti ti-layout-grid text-2xl"></i>
          </button>
          <button
            id="nav-profile"
            class="nav-btn p-3.5 hover:bg-midnight-600/70 text-slate-400 hover:text-gold-300 transition-colors"
            data-page="profile-page"
          >
            <i class="ti ti-user-circle text-2xl"></i>
          </button>
        </div>

        <button
          id="nav-cart"
          class="p-3 rounded-full bg-gradient-to-br from-gold-500/20 via-amber-600/10 to-transparent border border-gold-500/50 hover:from-gold-500/40 relative overflow-hidden gem-btn"
          onclick="openCartDrawer()"
        >
          <i class="ti ti-basket text-gold-300 text-2xl"></i>
          <span
            id="cart-badge"
            class="absolute -top-0.5 -right-0.5 w-4 h-4 flex items-center justify-center rounded-full bg-ruby text-xs text-white font-bold inter-font"
            >3</span
          >
        </button>
      </div>
    </div>

    <!-- Overlay for drawers -->
    <div class="overlay" id="overlay" onclick="closeCartDrawer()"></div>

    <!-- Cart drawer -->
    <div class="drawer custom-scrollbar" id="cart-drawer">
      <div
        class="flex-shrink-0 p-5 border-b border-midnight-700/80 flex justify-between items-center sticky top-0 bg-gradient-to-b from-midnight-800 to-midnight-800/90 backdrop-blur-sm z-10"
      >
        <h2
          class="text-xl font-semibold text-gold-300 flex items-center font-playfair"
        >
          <i class="ti ti-basket mr-2.5 text-2xl"></i>购物车
        </h2>
        <button
          class="p-2 rounded-full bg-midnight-700/70 hover:bg-midnight-600/90 transition-colors"
          onclick="closeCartDrawer()"
        >
          <i class="ti ti-x text-slate-300 text-xl"></i>
        </button>
      </div>

      <div
        id="cart-items-container"
        class="flex-grow p-5 space-y-5 overflow-y-auto custom-scrollbar"
      >
        <!-- Cart items will be populated here by JS -->
        <div
          class="bg-midnight-800/70 rounded-xl p-4 border border-midnight-700/80 shadow-lg"
        >
          <div class="flex items-start mb-3">
            <div
              class="product-card-image w-20 h-20 mr-4 border border-midnight-600"
              style="
                background-image: url(https://cdn.sa.net/2025/06/03/UJbWPxGvfeLmTF3.jpg);
              "
            ></div>
            <div class="flex-1 inter-font">
              <h3
                class="font-semibold text-sm text-slate-100 line-clamp-1 font-playfair"
              >
                蓝宝石项链
              </h3>
              <p class="text-xs text-slate-400 mt-0.5">
                尺寸: 中号 | 颜色: 深蓝
              </p>
              <div class="mt-1 text-amber-400 font-semibold">¥1,280.00</div>
            </div>
            <button
              class="p-1.5 rounded-full text-slate-500 hover:text-ruby-400 hover:bg-ruby-500/10 transition-colors"
            >
              <i class="ti ti-trash text-lg"></i>
            </button>
          </div>
          <div class="flex justify-between items-center">
            <div
              class="flex items-center border border-slate-600/70 rounded-full overflow-hidden inter-font"
            >
              <button
                class="px-3 py-1 hover:bg-slate-700/80 text-slate-300 transition-colors"
              >
                -
              </button>
              <div class="px-4 py-1 text-sm text-slate-200">1</div>
              <button
                class="px-3 py-1 hover:bg-slate-700/80 text-slate-300 transition-colors"
              >
                +
              </button>
            </div>
            <div class="text-xs text-emerald-400 inter-font">库存充足</div>
          </div>
        </div>
        <div
          class="bg-midnight-800/70 rounded-xl p-4 border border-midnight-700/80 shadow-lg"
        >
          <div class="flex items-start mb-3">
            <div
              class="product-card-image w-20 h-20 mr-4 border border-midnight-600"
              style="
                background-image: url(https://cdn.sa.net/2025/06/03/KAoJ9DPMX42QxaN.jpg);
              "
            ></div>
            <div class="flex-1 inter-font">
              <h3
                class="font-semibold text-sm text-slate-100 line-clamp-1 font-playfair"
              >
                几何抽象画作
              </h3>
              <p class="text-xs text-slate-400 mt-0.5">
                尺寸: 40×40cm | 框: 原木黑
              </p>
              <div class="mt-1 text-amber-400 font-semibold">¥690.00</div>
            </div>
            <button
              class="p-1.5 rounded-full text-slate-500 hover:text-ruby-400 hover:bg-ruby-500/10 transition-colors"
            >
              <i class="ti ti-trash text-lg"></i>
            </button>
          </div>
          <div class="flex justify-between items-center">
            <div
              class="flex items-center border border-slate-600/70 rounded-full overflow-hidden inter-font"
            >
              <button
                class="px-3 py-1 hover:bg-slate-700/80 text-slate-300 transition-colors"
              >
                -
              </button>
              <div class="px-4 py-1 text-sm text-slate-200">1</div>
              <button
                class="px-3 py-1 hover:bg-slate-700/80 text-slate-300 transition-colors"
              >
                +
              </button>
            </div>
            <div class="text-xs text-amber-500 inter-font">仅剩2件</div>
          </div>
        </div>
        <!-- Empty cart state -->
        <div id="cart-empty-state" class="hidden text-center py-10">
          <i class="ti ti-mood-empty text-6xl text-slate-600 mb-4"></i>
          <p class="text-slate-400 font-inter">购物车空空如也</p>
          <p class="text-xs text-slate-500 font-inter mt-1">
            快去定制您的专属潮玩吧！
          </p>
          <button
            onclick="closeCartDrawer(); switchPage('home-page');"
            class="mt-6 text-sm py-2 px-6 rounded-lg bg-gold-500/20 text-gold-300 border border-gold-500/40 hover:bg-gold-500/30 transition font-inter"
          >
            去逛逛
          </button>
        </div>
      </div>

      <div
        class="flex-shrink-0 border-t border-midnight-700/80 bg-midnight-800/95 p-5 sticky bottom-0 backdrop-blur-sm z-10"
      >
        <div class="flex justify-between items-center mb-3 inter-font">
          <span class="text-sm text-slate-300"
            >共 <span id="cart-total-items">2</span> 件商品</span
          >
          <span
            id="cart-total-price"
            class="font-semibold text-xl text-gold-300"
            >¥1,970.00</span
          >
        </div>
        <button
          onclick="goToCheckout()"
          class="w-full py-3.5 rounded-xl bg-gradient-to-r from-gold-500 to-amber-600 text-midnight-900 font-semibold text-base hover:opacity-90 transition-opacity flex justify-center items-center gem-btn inter-font"
        >
          去结算 <i class="ti ti-arrow-right ml-2"></i>
        </button>
      </div>
    </div>

    <script>
      // --- Global State & Data (Simulated) ---
      let currentPage = "home-page";
      let navigationHistory = ["home-page"];
      let currentCustomProductId = null;
      let currentStoreId = null;
      const basePrices = {
        // Store base prices for products
        101: 1280,
        201: 380,
        202: 690,
        203: 420,
        204: 85,
        301: 1580,
        302: 980,
        303: 650,
        304: 520,
        401: 650,
        402: 580,
        403: 85,
        404: 1280,
        501: 1580,
        502: 980,
      };
      let customizationOptions = {
        size: { value: null, priceAdjust: 0 },
        color: { value: null, priceAdjust: 0 },
        background: { value: null, priceAdjust: 0, image: null },
        print: { value: null, priceAdjust: 0, image: null },
      };

      const productDetails = {
        // Example product details for customization page
        UJbWPxGvfeLmTF3: {
          // Matches a CDN image part
          name: "蓝宝石项链",
          basePrice: 1280,
          originalPrice: 1880,
          image: "https://cdn.sa.net/2025/06/03/UJbWPxGvfeLmTF3.jpg",
          liked: true,
          id: "P001", // Assign a unique ID for like/cart
        },
        default: {
          name: "定制商品",
          basePrice: 500,
          originalPrice: 750,
          image: "https://cdn.sa.net/2025/06/03/KXfP4zQhD6LOvEN.jpg", // Default if no specific match
          liked: false,
          id: "P_DEFAULT",
        },
      };
      currentCustomProductId = productDetails.default.id; // Initialize with default

      const storeData = {
        1: {
          name: "星光艺术坊",
          logo: "https://cdn.sa.net/2025/06/03/P6xNEMQVGqdusbc.jpg",
          banner: "https://cdn.sa.net/2025/06/03/ldYZHikhtEOr1wL.jpg",
          rating: 4.8,
          positiveFeedback: "97%",
          followers: "1.8k",
          slogan: "点亮生活，艺无止境",
          descriptionShort: "原创艺术品与设计师潮玩聚集地。",
          fullDescription:
            "星光艺术坊致力于发掘与推广新锐设计师的原创作品，涵盖潮流玩具、艺术版画、生活美学等多个领域。每件作品都承载着设计师的独特构思与匠心。",
          isFollowed: false,
          products: [
            {
              id: 201,
              name: "星光手链",
              price: 380,
              originalPrice: 580,
              image: "https://cdn.sa.net/2025/06/03/KXfP4zQhD6LOvEN.jpg",
              liked: false,
              tag: "7折",
              category: "jewelry",
            },
            {
              id: 202,
              name: "几何画作",
              price: 690,
              image: "https://cdn.sa.net/2025/06/03/KAoJ9DPMX42QxaN.jpg",
              liked: true,
              category: "art",
            },
            {
              id: 203,
              name: "猫咪毛毡项链",
              price: 420,
              image: "https://cdn.sa.net/2025/06/03/IsqmiLSDB3Cn81p.jpg",
              liked: false,
              category: "jewelry",
            },
            {
              id: 204,
              name: "星空系列贴纸",
              price: 85,
              image: "https://cdn.sa.net/2025/06/03/vqTagyotSnsrLz3.jpg",
              liked: false,
              tag: "新品",
              category: "discount",
            },
          ],
        },
        2: {
          name: "匠心工坊",
          logo: "https://cdn.sa.net/2025/06/03/ohHz5MqL9WSnlYx.jpg",
          banner: "https://cdn.sa.net/2025/06/03/VxQ6FlsOIEUez41.jpg",
          rating: 4.9,
          positiveFeedback: "98%",
          followers: "2.5k",
          slogan: "匠心定制 · 艺术典藏",
          descriptionShort: "专注于高品质手工定制饰品与艺术品。",
          fullDescription:
            "设计师团队源自欧洲顶尖艺术设计学院，每件作品均经过精心设计与纯手工打磨。我们承诺定制周期为7-14个工作日，并支持30天无理由退换货服务，确保您的购物体验无忧。",
          isFollowed: true,
          products: [
            {
              id: 301,
              name: "红宝石镶钻耳环",
              price: 1580,
              originalPrice: 2080,
              image: "https://cdn.sa.net/2025/06/03/5jI6fbX7ouhApyN.jpg",
              liked: false,
              tag: "限时5折",
              category: "jewelry",
            },
            {
              id: 302,
              name: "孔雀石复古吊坠",
              price: 980,
              image: "https://cdn.sa.net/2025/06/03/8uP9tYbvrI5yOdl.jpg",
              liked: false,
              tag: "新品",
              category: "jewelry",
            },
            {
              id: 303,
              name: "星空定制手链",
              price: 650,
              image: "https://cdn.sa.net/2025/06/03/78LG6JqmkU5WtCr.jpg",
              liked: true,
              category: "jewelry",
            },
            {
              id: 304,
              name: "几何雅致耳钉",
              price: 520,
              image: "https://cdn.sa.net/2025/06/03/cfUJTk8lwxjZs5n.jpg",
              liked: false,
              category: "jewelry",
            },
          ],
        },
        3: {
          //潮玩工场
          name: "潮玩工场",
          logo: "https://cdn.sa.net/2025/06/03/6QDRWJMGO8eqLyw.jpg",
          banner: "https://cdn.sa.net/2025/06/03/Ytnm8GUFWXDjL4e.jpg",
          rating: 4.7,
          positiveFeedback: "95%",
          followers: "1.2k",
          slogan: "潮无界，玩无度",
          descriptionShort: "最新最酷的潮流玩具和手办定制。",
          fullDescription:
            "潮玩工场是领先的潮流玩具和手办定制平台，我们与全球设计师合作，为您带来独一无二的收藏品。支持个性化涂装和配件定制。",
          isFollowed: false,
          products: [
            // Add products specific to this store
          ],
        },
      };

      const orderData = [
        {
          id: "BAG20240522",
          status: "in_transit",
          date: "2025-05-22",
          total: "12,600.00",
          items: [
            {
              name: "蓝宝石定制对戒",
              desc: "男女款各一件",
              image: "https://cdn.sa.net/2025/05/05/xJc5P8W2t3Hv4nS.jpg",
              count: 2,
            },
          ],
        },
        {
          id: "BAG20240512",
          status: "completed",
          date: "2025-05-12",
          total: "9,880.00",
          items: [
            {
              name: "18K金镶钻手链",
              desc: "定制刻字：Love Forever",
              image: "https://cdn.sa.net/2025/05/01/L9d8wNqo7ZtF4rG.jpg",
              count: 1,
            },
          ],
        },
        {
          id: "BAG20240428",
          status: "pending_payment",
          date: "2025-04-28",
          total: "19,800.00",
          items: [
            {
              name: "星芒系列钻石项链",
              desc: "铂金款 | 配证书",
              image: "https://cdn.sa.net/2025/04/28/f7gR1EwZ8pV3kH6.jpg",
              count: 1,
            },
          ],
        },
      ];

      // --- Utility Functions ---
      function updateTime() {
        const now = new Date();
        const hours = String(now.getHours()).padStart(2, "0");
        const minutes = String(now.getMinutes()).padStart(2, "0");
        document.getElementById(
          "current-time"
        ).textContent = `${hours}:${minutes}`;
      }

      function generateSparkles(container, count = 15) {
        for (let i = 0; i < count; i++) {
          const sparkle = document.createElement("div");
          sparkle.className = "sparkle";
          sparkle.style.left = `${Math.random() * 100}%`;
          sparkle.style.top = `${Math.random() * 100}%`;
          const delay = Math.random() * 8; // Stagger animation
          const duration = 4 + Math.random() * 4; // Vary duration
          sparkle.style.animationDelay = `${delay}s`;
          sparkle.style.animationDuration = `${duration}s`;
          // For sparkle-drift animation variables
          sparkle.style.setProperty("--tx", `${(Math.random() - 0.5) * 50}px`);
          sparkle.style.setProperty("--ty", `${(Math.random() - 0.5) * 50}px`);
          container.appendChild(sparkle);
        }
      }

      // --- Navigation ---
      function switchPage(pageId, params = {}) {
        document
          .querySelectorAll(".page")
          .forEach((page) => page.classList.remove("active-page"));
        const targetPage = document.getElementById(pageId);
        if (targetPage) {
          targetPage.classList.add("active-page");
          currentPage = pageId;

          if (navigationHistory[navigationHistory.length - 1] !== pageId) {
            if (
              pageId === "home-page" ||
              pageId === "category-page" ||
              pageId === "profile-page"
            ) {
              // Main tabs
              navigationHistory = [pageId]; // Reset history for main tabs
            } else {
              navigationHistory.push(pageId);
            }
          }
          updateNavButtons();
          updateBackButtonState();

          // Scroll to top of new page content
          const contentArea = targetPage.querySelector(
            ".flex-1.overflow-y-auto"
          );
          if (contentArea) contentArea.scrollTop = 0;

          // Page specific initializations
          if (pageId === "custom-product-page") {
            const productKey = params.productImage
              ? params.productImage.match(/([^\/]+)\.jpg$/)[1]
              : "default";
            const product =
              productDetails[productKey] || productDetails["default"];
            currentCustomProductId = product.id;
            initializeCustomProductPage(product);
          } else if (pageId === "store-page" && params.storeId) {
            currentStoreId = params.storeId;
            initializeStorePage(params.storeId);
          } else if (pageId === "order-page") {
            renderOrderList(params.filter || "all");
          } else if (pageId === "order-detail-page" && params.orderId) {
            initializeOrderDetailPage(params.orderId);
          }
        } else {
          console.error(`Page with ID ${pageId} not found.`);
        }
      }

      function goBack() {
        if (navigationHistory.length > 1) {
          navigationHistory.pop(); // Remove current page
          const previousPageId =
            navigationHistory[navigationHistory.length - 1];
          // Potentially pass params if needed for previous page state restoration
          switchPage(previousPageId);
        }
        // If only one item in history (e.g., a main tab), back button might be disabled or have app-exit behavior
      }

      function updateNavButtons() {
        document.querySelectorAll(".nav-btn").forEach((btn) => {
          btn.classList.remove("tab-active");
          if (
            btn.dataset.page === currentPage ||
            (navigationHistory.length > 1 &&
              btn.dataset.page === navigationHistory[0])
          ) {
            // Highlight main tab if on its subpage
            if (
              ["home-page", "category-page", "profile-page"].includes(
                btn.dataset.page
              ) &&
              (btn.dataset.page === currentPage ||
                navigationHistory[0] === btn.dataset.page)
            ) {
              btn.classList.add("tab-active");
            }
          }
        });
      }

      function updateBackButtonState() {
        const backButton = document.getElementById("nav-back");
        if (navigationHistory.length > 1) {
          backButton.classList.remove("opacity-50", "cursor-not-allowed");
          backButton.disabled = false;
        } else {
          backButton.classList.add("opacity-50", "cursor-not-allowed");
          backButton.disabled = true;
        }
      }

      // --- Cart Drawer ---
      function openCartDrawer() {
        document.getElementById("cart-drawer").classList.add("drawer-open");
        document.getElementById("overlay").classList.add("overlay-visible");
      }

      function closeCartDrawer() {
        document.getElementById("cart-drawer").classList.remove("drawer-open");
        document.getElementById("overlay").classList.remove("overlay-visible");
      }

      function goToCheckout() {
        closeCartDrawer();
        // switchPage('checkout-page'); // Assuming you have a checkout page
        alert(
          "Proceeding to Checkout (Checkout page not fully implemented in this snippet)."
        );
      }

      // --- Interactivity ---
      function toggleLike(buttonElement, productId, isCustomPage = false) {
        const icon = buttonElement.querySelector("i");
        const isLiked = icon.classList.contains("ti-heart-filled");
        if (isLiked) {
          icon.classList.remove("ti-heart-filled", "text-red-500");
          icon.classList.add("ti-heart"); // Add back base class if needed
          if (isCustomPage)
            productDetails[currentCustomProductId].liked = false; // Update data model
        } else {
          icon.classList.add("ti-heart-filled", "text-red-500");
          icon.classList.remove("ti-heart");
          if (isCustomPage) productDetails[currentCustomProductId].liked = true; // Update data model
        }
        // Here you would typically also make an API call to update server state
      }

      function toggleFollow(buttonElement, storeId, isStorePage = false) {
        const store = storeData[storeId];
        if (!store) return;

        store.isFollowed = !store.isFollowed; // Update mock data

        if (store.isFollowed) {
          buttonElement.innerHTML = "已关注";
          buttonElement.classList.add("bg-gold-500/10", "border-gold-500/50");
          buttonElement.classList.remove("border-gold-500/80", "text-gold-400");
          if (isStorePage) {
            // Specifically for the banner button on store page
            buttonElement.innerHTML =
              '<i class="ti ti-check mr-1 text-sm"></i> 已关注';
            buttonElement.classList.replace(
              "from-gold-500/90",
              "from-slate-600/70"
            );
            buttonElement.classList.replace(
              "to-amber-600/90",
              "to-slate-700/70"
            );
            buttonElement.classList.replace(
              "text-midnight-900",
              "text-gold-300"
            );
          }
        } else {
          buttonElement.innerHTML = "关注";
          buttonElement.classList.remove(
            "bg-gold-500/10",
            "border-gold-500/50"
          );
          buttonElement.classList.add("border-gold-500/80", "text-gold-400");
          if (isStorePage) {
            buttonElement.innerHTML =
              '<i class="ti ti-plus mr-1 text-sm"></i> 关注';
            buttonElement.classList.replace(
              "from-slate-600/70",
              "from-gold-500/90"
            );
            buttonElement.classList.replace(
              "to-slate-700/70",
              "to-amber-600/90"
            );
            buttonElement.classList.replace(
              "text-gold-300",
              "text-midnight-900"
            );
          }
        }
      }

      function navigateToCategory(categoryName) {
        // This could switch to category page and pre-fill search or apply filter
        switchPage("category-page", { filter: categoryName });
        alert(`Navigating to ${categoryName} category.`);
      }

      function filterByCategory(categoryName) {
        alert(`Filtering by ${categoryName}.`);
        // Implement actual filtering logic here
      }

      // --- Custom Product Page Logic ---
      function initializeCustomProductPage(product) {
        document.getElementById(
          "custom-product-title"
        ).textContent = `定制 ${product.name}`;
        document.getElementById(
          "custom-product-image"
        ).style.backgroundImage = `url(${product.image})`;
        document.getElementById(
          "custom-product-price"
        ).textContent = `¥${product.basePrice.toFixed(2)}`;
        document.getElementById(
          "custom-product-original-price"
        ).textContent = `¥${product.originalPrice.toFixed(2)}`;

        const likeIcon = document.getElementById("custom-product-like-icon");
        if (product.liked) {
          likeIcon.classList.add("ti-heart-filled", "text-red-500");
          likeIcon.classList.remove("ti-heart");
        } else {
          likeIcon.classList.remove("ti-heart-filled", "text-red-500");
          likeIcon.classList.add("ti-heart");
        }
        // Reset and re-bind options
        resetCustomizationOptions(product.basePrice);
        bindCustomOptionEvents(product.basePrice);
      }

      function resetCustomizationOptions(basePrice) {
        customizationOptions = {
          size: { value: null, priceAdjust: 0 },
          color: { value: null, priceAdjust: 0 },
          background: { value: null, priceAdjust: 0, image: null },
          print: { value: null, priceAdjust: 0, image: null },
        };
        document
          .querySelectorAll(".custom-option-btn.selected")
          .forEach((btn) =>
            btn.classList.remove(
              "selected",
              "border-amber-500/70",
              "bg-amber-500/20"
            )
          );
        updateCustomizationPrice(basePrice);
      }

      function bindCustomOptionEvents(baseProductPrice) {
        document.querySelectorAll(".custom-option-btn").forEach((button) => {
          button.onclick = () => {
            const optionType = button.dataset.option;
            const value = button.dataset.value;
            const priceAdjust = parseFloat(button.dataset.priceAdjust);
            const image = button.dataset.image;

            // Deselect other buttons in the same group
            document
              .querySelectorAll(
                `.custom-option-btn[data-option="${optionType}"]`
              )
              .forEach((btn) => {
                btn.classList.remove(
                  "selected",
                  "border-amber-500/70",
                  "bg-amber-500/20"
                );
                btn.classList.add("border-slate-600", "hover:bg-amber-500/10");
                // For image buttons, remove brightness filter
                if (btn.querySelector(".bg-cover"))
                  btn.querySelector(".bg-cover").style.filter = "brightness(1)";
                // For color circles, remove heavy border
                if (
                  optionType === "color" &&
                  btn.querySelector('div[class*="rounded-full"]')
                ) {
                  btn
                    .querySelector('div[class*="rounded-full"]')
                    .classList.replace(
                      "border-amber-500/70",
                      "border-slate-700"
                    );
                  btn
                    .querySelector('div[class*="rounded-full"]')
                    .classList.remove(
                      "ring-2",
                      "ring-amber-400",
                      "ring-offset-2",
                      "ring-offset-midnight-800"
                    );
                }
              });

            // Select clicked button
            button.classList.add(
              "selected",
              "border-amber-500/70",
              "bg-amber-500/20"
            );
            button.classList.remove(
              "border-slate-600",
              "hover:bg-amber-500/10"
            );
            if (button.querySelector(".bg-cover"))
              button.querySelector(".bg-cover").style.filter =
                "brightness(1.2)";
            if (
              optionType === "color" &&
              button.querySelector('div[class*="rounded-full"]')
            ) {
              button
                .querySelector('div[class*="rounded-full"]')
                .classList.replace("border-slate-700", "border-amber-500/70");
              button
                .querySelector('div[class*="rounded-full"]')
                .classList.add(
                  "ring-2",
                  "ring-amber-400",
                  "ring-offset-2",
                  "ring-offset-midnight-800"
                );
            }

            customizationOptions[optionType] = { value, priceAdjust, image };
            updateCustomizationPrice(baseProductPrice);

            // Update main product image if background/print is selected
            if (optionType === "background" && image) {
              document.getElementById(
                "custom-product-image"
              ).style.backgroundImage = `url(${image})`;
            } else if (optionType === "print" && image) {
              // This would be more complex, potentially overlaying images or using canvas
              // For now, let's just change the main image for demo
              document.getElementById(
                "custom-product-image"
              ).style.backgroundImage = `url(${image})`;
            }
          };
        });
      }

      function updateCustomizationPrice(baseProductPrice) {
        let totalExtra = 0;
        for (const type in customizationOptions) {
          if (customizationOptions[type].value) {
            totalExtra += customizationOptions[type].priceAdjust;
          }
        }
        const finalPrice = baseProductPrice + totalExtra;
        document.getElementById(
          "customization-extra-price"
        ).textContent = `+ ¥${totalExtra.toFixed(2)}`;
        document.getElementById(
          "final-custom-price"
        ).textContent = `¥${finalPrice.toFixed(2)}`;

        // Update original price if it exists for this product
        const productKey =
          document
            .getElementById("custom-product-image")
            .style.backgroundImage.match(/([^\/]+)\.jpg$/)[1] || "default";
        const product = productDetails[productKey] || productDetails.default;
        if (product.originalPrice) {
          document.getElementById(
            "original-price-summary"
          ).textContent = `原价 ¥${product.originalPrice.toFixed(2)}`;
        } else {
          document.getElementById("original-price-summary").textContent = ``;
        }

        // Potentially update lead time based on complexity
        if (
          totalExtra > 200 ||
          customizationOptions.print.value === "custom_upload"
        ) {
          document.getElementById("customization-lead-time").textContent =
            "10-15个工作日";
        } else if (totalExtra > 50) {
          document.getElementById("customization-lead-time").textContent =
            "7-12个工作日";
        } else {
          document.getElementById("customization-lead-time").textContent =
            "7-10个工作日";
        }
      }
      function addToCartCustomized() {
        // Logic to gather selected options and add to cart
        alert(
          `Customized item added to cart! Total: ${
            document.getElementById("final-custom-price").textContent
          }`
        );
        // Potentially update cart badge
        const badge = document.getElementById("cart-badge");
        badge.textContent = parseInt(badge.textContent) + 1;
      }

      // --- Store Page Logic ---
      function initializeStorePage(storeId) {
        const store = storeData[storeId];
        if (!store) {
          alert("店铺信息未找到!");
          goBack(); // Or redirect to a generic error/home page
          return;
        }
        document.getElementById(
          "store-banner-image"
        ).style.backgroundImage = `url(${store.banner})`;
        document.getElementById(
          "store-logo-main"
        ).style.backgroundImage = `url(${store.logo})`;
        document.getElementById("store-name-main").textContent = store.name;
        document.getElementById("store-rating-main").textContent = store.rating;
        document.getElementById(
          "store-positive-feedback"
        ).textContent = `${store.positiveFeedback} 好评`;
        document.getElementById(
          "store-followers"
        ).textContent = `${store.followers} 关注`;
        document.getElementById("store-slogan").textContent = store.slogan;
        document.getElementById("store-description-short").textContent =
          store.descriptionShort;
        document.getElementById("store-full-description").textContent =
          store.fullDescription;

        const followButton = document.getElementById(
          "store-follow-button-banner"
        );
        if (store.isFollowed) {
          followButton.innerHTML =
            '<i class="ti ti-check mr-1 text-sm"></i> 已关注';
          followButton.classList.replace(
            "from-gold-500/90",
            "from-slate-600/70"
          );
          followButton.classList.replace("to-amber-600/90", "to-slate-700/70");
          followButton.classList.replace("text-midnight-900", "text-gold-300");
        } else {
          followButton.innerHTML =
            '<i class="ti ti-plus mr-1 text-sm"></i> 关注';
          followButton.classList.replace(
            "from-slate-600/70",
            "from-gold-500/90"
          );
          followButton.classList.replace("to-slate-700/70", "to-amber-600/90");
          followButton.classList.replace("text-gold-300", "text-midnight-900");
        }
        renderStoreProducts(store.products); // Initial render with all products
        bindStoreCategoryTabs(store.products);
      }

      function renderStoreProducts(productsToRender) {
        const grid = document.getElementById("store-products-grid");
        grid.innerHTML = ""; // Clear previous products
        if (!productsToRender || productsToRender.length === 0) {
          grid.innerHTML = `<p class="col-span-2 text-center text-slate-400 py-8 inter-font">该分类下暂无商品。</p>`;
          return;
        }
        productsToRender.forEach((product) => {
          const card = `
                    <div class="bg-midnight-800/50 rounded-xl border border-midnight-700/70 overflow-hidden group p-2 cursor-pointer" onclick="openProductDetail('${
                      product.id
                    }', '${product.image}')">
                        <div class="relative">
                            <div class="product-card-image" style="background-image: url(${
                              product.image
                            });">
                                <button onclick="event.stopPropagation(); toggleLike(this, ${
                                  product.id
                                })" class="absolute top-2 right-2 p-1.5 rounded-full bg-black/50 hover:bg-ruby/80 transition-all text-white">
                                    <i class="ti ${
                                      product.liked
                                        ? "ti-heart-filled text-red-500"
                                        : "ti-heart"
                                    } text-base"></i>
                                </button>
                                ${
                                  product.tag
                                    ? `<div class="absolute bottom-2 left-2 bg-${
                                        product.tag.includes("折") ||
                                        product.tag.includes("限时")
                                          ? "ruby"
                                          : product.tag.includes("新品")
                                          ? "emerald"
                                          : "sapphire"
                                      }/80 text-white px-2 py-0.5 rounded-sm text-xs font-semibold inter-font">${
                                        product.tag
                                      }</div>`
                                    : ""
                                }
                            </div>
                            <div class="pt-2 inter-font">
                                <div class="text-sm font-medium text-slate-300 truncate group-hover:text-gold-400 transition">${
                                  product.name
                                }</div>
                                <div class="flex justify-between items-center mt-1">
                                    <span class="text-base text-amber-400 font-semibold">¥${
                                      product.price
                                    }</span>
                                    ${
                                      product.originalPrice
                                        ? `<del class="text-xs text-slate-500">¥${product.originalPrice}</del>`
                                        : ""
                                    }
                                </div>
                            </div>
                        </div>
                    </div>`;
          grid.innerHTML += card;
        });
      }

      function openProductDetail(productId, productImage) {
        // For demo, we use productImage to find the right details for custom page.
        // In a real app, productId would be enough.
        switchPage("custom-product-page", { productImage: productImage });
      }

      function toggleStoreFollow(buttonElement, storeId) {
        toggleFollow(buttonElement, storeId, true); // true indicates it's the store page banner button
      }

      function bindStoreCategoryTabs(allStoreProducts) {
        const tabs = document.querySelectorAll(".store-category-tab");
        tabs.forEach((tab) => {
          tab.onclick = () => {
            tabs.forEach((t) => {
              t.classList.remove(
                "text-gold-400",
                "border-b-2",
                "border-gold-500",
                "font-semibold"
              );
              t.classList.add("text-slate-400");
            });
            tab.classList.add(
              "text-gold-400",
              "border-b-2",
              "border-gold-500",
              "font-semibold"
            );
            tab.classList.remove("text-slate-400");

            const filter = tab.dataset.category;
            if (filter === "all") {
              renderStoreProducts(allStoreProducts);
            } else {
              const filteredProducts = allStoreProducts.filter(
                (p) =>
                  p.category === filter ||
                  (filter === "hot" &&
                    p.tag &&
                    (p.tag.includes("折") || p.tag.includes("热卖"))) ||
                  (filter === "new" && p.tag && p.tag.includes("新品")) ||
                  (filter === "discount" && p.tag && p.tag.includes("折"))
              );
              renderStoreProducts(filteredProducts);
            }
          };
        });
      }

      // --- Order Page & Detail Logic ---
      function renderOrderList(filter = "all") {
        const container = document.getElementById("order-list-container");
        const emptyState = document.getElementById("orders-empty-state");
        container.innerHTML = ""; // Clear current list

        const filteredOrders = orderData.filter((order) => {
          if (filter === "all") return true;
          return order.status === filter; // Simple filter, can be more complex
        });

        if (filteredOrders.length === 0) {
          emptyState.classList.remove("hidden");
        } else {
          emptyState.classList.add("hidden");
          filteredOrders.forEach((order) => {
            let statusClass = "bg-slate-500/20 text-slate-300";
            let statusText = "未知状态";
            if (order.status === "in_transit") {
              statusClass = "bg-amber-500/20 text-amber-400";
              statusText = "配送中";
            } else if (order.status === "completed") {
              statusClass = "bg-emerald-500/20 text-emerald-400";
              statusText = "已完成";
            } else if (order.status === "pending_payment") {
              statusClass = "bg-rose-500/20 text-rose-400";
              statusText = "待付款";
            }
            // Add more statuses

            const orderCard = `
                        <div class="bg-midnight-800/50 rounded-xl p-4 border border-midnight-700/70 shadow-md">
                            <div class="flex justify-between items-center mb-3">
                                <div class="flex items-center">
                                    <span class="text-sm font-medium text-slate-200 mr-2 font-inter">${
                                      order.id
                                    }</span>
                                    <span class="text-xs px-2 py-0.5 ${statusClass} rounded-full font-inter">${statusText}</span>
                                </div>
                                <span class="text-xs text-slate-400 font-inter">${
                                  order.date
                                }</span>
                            </div>
                            ${order.items
                              .map(
                                (item) => `
                                <div class="flex items-start mb-2 last:mb-0 cursor-pointer" onclick="openOrderDetail('${order.id}')">
                                    <div class="mr-3">
                                        <div class="bg-cover bg-center w-16 h-16 rounded-md border border-midnight-600" style="background-image: url(${item.image});"></div>
                                    </div>
                                    <div class="flex-1">
                                        <h3 class="font-semibold text-sm text-slate-100 font-playfair line-clamp-1">${item.name}</h3>
                                        <p class="text-xs text-slate-400 font-inter line-clamp-1">${item.desc}</p>
                                        <p class="text-xs text-slate-500 font-inter mt-0.5">共${item.count}件商品</p>
                                    </div>
                                </div>
                            `
                              )
                              .join("")}
                            <div class="border-t border-midnight-700/50 pt-3 mt-3">
                                <div class="flex justify-between items-center">
                                    <div class="flex items-center">
                                        <span class="text-amber-400 text-base font-semibold font-inter">¥${
                                          order.total
                                        }</span>
                                    </div>
                                    <div class="flex space-x-2">
                                        ${
                                          order.status === "pending_payment"
                                            ? `<button onclick="payOrder('${order.id}')" class="text-xs py-1.5 px-3 rounded-full bg-rose-500/80 hover:bg-rose-500 text-white transition font-inter">立即付款</button>`
                                            : ""
                                        }
                                        <button onclick="openOrderDetail('${
                                          order.id
                                        }')" class="text-xs py-1.5 px-3 border border-slate-600 hover:border-slate-500 rounded-full text-slate-300 hover:text-white transition font-inter">查看详情</button>
                                        ${
                                          order.status !== "pending_payment"
                                            ? `<button onclick="buyAgain('${order.id}')" class="text-xs py-1.5 px-3 rounded-full bg-gold-500/10 hover:bg-gold-500/20 text-gold-400 border border-gold-500/30 transition font-inter">再次购买</button>`
                                            : ""
                                        }
                                    </div>
                                </div>
                            </div>
                        </div>`;
            container.innerHTML += orderCard;
          });
        }

        // Update active tab
        document.querySelectorAll(".order-filter-tab").forEach((tab) => {
          tab.classList.remove(
            "active-tab",
            "text-gold-400",
            "border-gold-500"
          );
          tab.classList.add("text-slate-400");
          if (tab.dataset.filter === filter) {
            tab.classList.add("active-tab", "text-gold-400", "border-gold-500");
            tab.classList.remove("text-slate-400");
          }
        });
      }

      function initializeOrderDetailPage(orderId) {
        const order = orderData.find((o) => o.id === orderId);
        if (!order) {
          alert("订单未找到");
          switchPage("order-page"); // Go back to order list
          return;
        }
        // Populate details, simplified for now
        document.getElementById("detail-order-id").textContent = order.id;
        document.getElementById("detail-order-time").textContent =
          order.date + " 15:23:46"; // Example time

        // Status text update
        let statusText = "未知状态";
        let statusMainText = "订单状态";
        const statusContainer = document.querySelector(
          "#order-detail-page .from-emerald-800\\/40"
        ); // More specific selector

        if (order.status === "in_transit") {
          statusText = "您的订单正在加急配送中";
          statusMainText = "正在配送途中";
          statusContainer.className = statusContainer.className.replace(
            /from-(emerald|rose|slate)-800\/40 via-(teal|rose|slate)-800\/30 to-(emerald|rose|slate)-800\/40 border-(emerald|rose|slate)-500\/40/,
            "from-amber-800/40 via-yellow-800/30 to-amber-800/40 border-amber-500/40"
          );
        } else if (order.status === "completed") {
          statusText = "订单已完成，感谢您的购买";
          statusMainText = "交易已完成";
          statusContainer.className = statusContainer.className.replace(
            /from-(amber|rose|slate)-800\/40 via-(yellow|rose|slate)-800\/30 to-(amber|rose|slate)-800\/40 border-(amber|rose|slate)-500\/40/,
            "from-emerald-800/40 via-teal-800/30 to-emerald-800/40 border-emerald-500/40"
          );
        } else if (order.status === "pending_payment") {
          statusText = "订单尚未支付，请尽快完成";
          statusMainText = "等待付款";
          statusContainer.className = statusContainer.className.replace(
            /from-(emerald|amber|slate)-800\/40 via-(teal|yellow|slate)-800\/30 to-(emerald|amber|slate)-800\/40 border-(emerald|amber|slate)-500\/40/,
            "from-rose-800/40 via-red-800/30 to-rose-800/40 border-rose-500/40"
          );
        }

        document.getElementById("order-detail-status-text").textContent =
          statusText;
        document.getElementById("order-detail-status-main").textContent =
          statusMainText;

        // Populate items - simplified (assuming first item for now)
        const itemsContainer = document.getElementById(
          "order-detail-items-container"
        );
        itemsContainer.innerHTML = ""; // Clear previous items
        order.items.forEach((item) => {
          const itemHTML = `
                <div class="flex items-start">
                    <div class="mr-3">
                        <div class="bg-cover bg-center w-20 h-20 rounded-lg border border-midnight-600" style="background-image: url(${
                          item.image
                        });"></div>
                    </div>
                    <div class="flex-1 inter-font">
                        <h3 class="font-medium text-sm text-slate-100 line-clamp-1">${
                          item.name
                        }</h3>
                        <p class="text-xs text-slate-400 mt-0.5">${
                          item.desc
                        }</p>
                        <div class="mt-1.5 flex justify-between items-end">
                             <span class="text-sm text-amber-400 font-semibold">¥${(
                               parseFloat(order.total) / item.count
                             ).toFixed(
                               2
                             )}</span> <!-- Approximate price per item -->
                            <span class="text-xs text-slate-400">x${
                              item.count
                            }</span>
                        </div>
                    </div>
                </div>`;
          itemsContainer.innerHTML += itemHTML;
        });
        document.getElementById(
          "summary-total"
        ).textContent = `¥${order.total}`;
        // Update action buttons based on status
        const actionsContainer = document.getElementById(
          "order-detail-actions"
        );
        actionsContainer.innerHTML = ""; // Clear old actions
        if (order.status === "in_transit") {
          actionsContainer.innerHTML = `
                    <button class="py-2 px-4 rounded-full text-xs bg-slate-700/80 hover:bg-slate-600/80 border border-slate-600/50 text-slate-200 transition-all">确认收货</button>
                    <button class="py-2 px-4 rounded-full text-xs bg-gold-500/20 hover:bg-gold-500/30 text-gold-300 border border-gold-500/50 transition-all">查看物流</button>
                `;
        } else if (order.status === "completed") {
          actionsContainer.innerHTML = `
                    <button class="py-2 px-4 rounded-full text-xs bg-slate-700/80 hover:bg-slate-600/80 border border-slate-600/50 text-slate-200 transition-all">申请售后</button>
                    <button class="py-2 px-4 rounded-full text-xs bg-gold-500/20 hover:bg-gold-500/30 text-gold-300 border border-gold-500/50 transition-all">评价订单</button>
                `;
        } else if (order.status === "pending_payment") {
          actionsContainer.innerHTML = `
                    <button class="py-2 px-4 rounded-full text-xs bg-slate-700/80 hover:bg-slate-600/80 border border-slate-600/50 text-slate-200 transition-all">取消订单</button>
                    <button onclick="payOrder('${order.id}')" class="py-2 px-4 rounded-full text-xs bg-rose-500/80 hover:bg-rose-500 text-white transition-all">立即付款</button>
                `;
        }
      }

      function openOrderDetail(orderId) {
        switchPage("order-detail-page", { orderId: orderId });
      }
      function buyAgain(orderId) {
        alert(
          `Functionality for 'Buy Again' order ${orderId} not implemented.`
        );
      }
      function payOrder(orderId) {
        alert(
          `Functionality for 'Pay Order' ${orderId} not implemented. Redirecting to payment page...`
        ); /* switchPage('payment-page', {orderId: orderId}); */
      }

      // --- Lifecycle ---
      document.addEventListener("DOMContentLoaded", function () {
        updateTime();
        setInterval(updateTime, 60000); // Update time every minute
        generateSparkles(document.getElementById("sparkle-container"));

        // Initial page setup
        switchPage("home-page");
        updateBackButtonState();

        // Nav button event listeners
        document.querySelectorAll(".nav-btn").forEach((btn) => {
          btn.addEventListener("click", () => switchPage(btn.dataset.page));
        });
        document.getElementById("nav-back").addEventListener("click", goBack);

        // Order filter tabs
        document.querySelectorAll(".order-filter-tab").forEach((tab) => {
          tab.addEventListener("click", (e) => {
            e.preventDefault();
            renderOrderList(tab.dataset.filter);
          });
        });
      });
    </script>
  </body>
</html>
