<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>智慧园区 - 楼宇管理 (Hybrid Notion/Card Style)</title>
    
    <!-- 引入Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com/"></script>
    
    <!-- 引入Remix Icon图标库 -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css" rel="stylesheet" />

    <style>
        /* 引入阿里巴巴普惠体3.0 */
        @font-face {
            font-family: 'AlibabaPuHuiTi';
            src: url('https://cdn.jsdelivr.net/npm/alibabapuhuiti-3-55-regular@1.0.0/AlibabaPuHuiTi-3-55-Regular.woff2') format('woff2');
            font-weight: 400;
        }
        @font-face {
            font-family: 'AlibabaPuHuiTi';
            src: url('https://cdn.jsdelivr.net/npm/alibabapuhuiti-3-75-semibold@1.0.0/AlibabaPuHuiTi-3-75-SemiBold.woff2') format('woff2');
            font-weight: 600;
        }

        /* 自定义Tailwind配置 */
        .font-sans {
            font-family: 'AlibabaPuHuiTi', sans-serif;
        }
        
        /* 隐藏滚动条 */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* 设备离线状态 */
        .card-offline {
            background-color: #f1f5f9 !important; /* slate-100 */
            opacity: 0.7;
            pointer-events: none;
        }
    </style>
</head>

<body class="bg-zinc-900 flex justify-center items-start font-sans">
    
    <!-- 模拟手机屏幕 -->
    <div id="app-container" class="relative w-full max-w-[420px] h-screen bg-white overflow-hidden flex flex-col">
        
        <!-- 主内容区域 -->
        <main class="flex-1 overflow-y-auto no-scrollbar p-3 space-y-3 pb-24 bg-white">
            
            <!-- 头部信息卡片 -->
            <div id="header-card" class="bg-slate-50 rounded-xl p-5">
                <h1 class="text-xl font-semibold text-zinc-900">浙江玖智科技有限公司</h1>
                <div class="mt-3 space-y-2 text-sm text-zinc-500">
                    <p><i class="ri-community-line align-text-bottom mr-2"></i>1031号办公室</p>
                    <p><i class="ri-time-line align-text-bottom mr-2"></i>剩余租期 300 天</p>
                </div>
            </div>

            <!-- 管理功能入口卡片 -->
            <div id="management-card" class="bg-slate-50 rounded-xl p-4">
                 <div class="grid grid-cols-2 gap-3">
                    <a href="bill-list.html" class="action-item"><i class="ri-bill-line text-blue-500"></i><span>企业账单</span></a>
                    <a href="team-management.html" class="action-item"><i class="ri-group-line text-sky-500"></i><span>我的团队</span></a>
                    <a href="repair-request.html" class="action-item"><i class="ri-tools-line text-amber-500"></i><span>报事报修</span></a>
                    <a href="visitor-management.html" class="action-item"><i class="ri-user-add-line text-emerald-500"></i><span>访客管理</span></a>
                    <a href="butler-contact.html" class="action-item"><i class="ri-customer-service-2-line text-rose-500"></i><span>楼宇管家</span>
                    <!-- 代码注释：修复了合同信息的图标 -->
                    <a href="contract-info.html" class="action-item"><i class="ri-file-text-line text-slate-500"></i><span>合同信息</span></a>
                    <a href="invoice-management.html" class="action-item"><i class="ri-mail-send-line text-violet-500"></i><span>开发票</span></a>
                    <a href="feedback.html" class="action-item"><i class="ri-feedback-line text-orange-500"></i><span>服务意见</span></a>
                </div>
            </div>
            
            <!-- 设备控制卡片 -->
            <div id="device-control-card" class="bg-slate-50 rounded-xl p-4">
                <!-- Tabs -->
                <div class="flex bg-slate-200/70 p-1 rounded-lg">
                    <button data-tab="ac" class="device-tab flex-1 py-1.5 text-sm font-semibold rounded-md">空调</button>
                    <button data-tab="light" class="device-tab flex-1 py-1.5 text-sm font-semibold rounded-md">灯光</button>
                </div>

                <!-- Device Grid -->
                <div id="ac-grid" class="grid grid-cols-2 gap-3 mt-4">
                     <!-- 设备将由JS渲染 -->
                </div>
                <div id="light-grid" class="grid grid-cols-2 gap-3 mt-4 hidden">
                     <!-- 设备将由JS渲染 -->
                </div>
            </div>
        </main>
        
        <!-- 底部导航栏 -->
        <nav id="bottom-nav" class="sticky bottom-0 left-0 w-full z-20 bg-white/80 backdrop-blur-lg border-t border-zinc-200 shrink-0">
            <div class="flex justify-around items-center h-16">
                <a href="index.html" class="flex flex-col items-center justify-center gap-1 text-zinc-600 hover:text-zinc-900 transition-colors flex-1 py-2"><i class="ri-home-4-line text-2xl"></i><span class="text-xs font-medium">首页</span></a>
                <a href="activities.html" class="flex flex-col items-center justify-center gap-1 text-zinc-600 hover:text-zinc-900 transition-colors flex-1 py-2"><i class="ri-calendar-event-line text-2xl"></i><span class="text-xs font-medium">园区活动</span></a>
                <a href="building-management.html" class="flex flex-col items-center justify-center gap-1 text-zinc-900 flex-1 py-2"><i class="ri-apps-fill text-2xl"></i><span class="text-xs font-semibold">楼宇管理</span></a>
                <a href="me.html" class="flex flex-col items-center justify-center gap-1 text-zinc-600 hover:text-zinc-900 transition-colors flex-1 py-2"><i class="ri-user-line text-2xl"></i><span class="text-xs font-medium">我的</span></a>
            </div>
        </nav>
    </div>

    <script>
        const style = document.createElement('style');
        style.textContent = `
            .action-item {
                display: flex;
                align-items: center;
                gap: 0.75rem; /* 12px */
                padding: 0.75rem; /* 12px */
                border-radius: 0.5rem; /* 8px */
                font-size: 0.875rem; /* 14px */
                font-weight: 600;
                color: #1e293b; /* slate-800 */
                background-color: #ffffff;
                border: 1px solid #e2e8f0; /* slate-200 */
                transition: background-color 0.2s, border-color 0.2s;
            }
            .action-item:hover {
                background-color: #f8fafc; /* slate-50 */
                border-color: #cbd5e1; /* slate-300 */
            }
            .action-item i { font-size: 1.25rem; /* 20px */ }
        `;
        document.head.appendChild(style);

        document.addEventListener('DOMContentLoaded', () => {
            const tabs = document.querySelectorAll('.device-tab');
            const grids = {
                ac: document.getElementById('ac-grid'),
                light: document.getElementById('light-grid')
            };

            const acData = [
                { id: 'ac1', name: '前台空调', status: 'online', isOn: true, mode: 'cooling', temp: 24 },
                { id: 'ac2', name: '财务室空调', status: 'online', isOn: false, mode: 'heating', temp: 26 },
            ];
            const lightData = [
                 { id: 'light1', name: '前台灯光', status: 'online', isOn: true},
                 { id: 'light2', name: '财务室灯光', status: 'offline', isOn: false},
            ];

            const createDeviceCardHTML = (device, type) => {
                const isOffline = device.status === 'offline';
                const cardClasses = `bg-white rounded-lg p-3 aspect-square flex flex-col justify-between shadow-sm border border-slate-200/50 ${isOffline ? 'card-offline' : ''}`;

                let contentHTML = '';
                if (type === 'ac') {
                    const modeIcon = device.mode === 'cooling' ? 'ri-snowflake-line' : 'ri-sun-line';
                    const colorClass = device.isOn ? (device.mode === 'cooling' ? 'text-blue-500' : 'text-orange-500') : 'text-slate-400';
                    const temp = device.isOn ? `${device.temp}°` : '—';
                    contentHTML = `
                        <div class="flex justify-between items-start w-full">
                           <p class="font-semibold text-slate-700">${device.name}</p>
                           ${isOffline ? `<p class="text-xs text-slate-400">离线</p>` : `<i class="${modeIcon} ${colorClass} text-xl"></i>`}
                        </div>
                        <p class="text-4xl font-semibold ${device.isOn ? 'text-slate-800' : 'text-slate-400'}">${temp}</p>
                    `;
                } else { // light
                     contentHTML = `
                        <div class="flex justify-between items-start w-full">
                           <p class="font-semibold text-slate-700">${device.name}</p>
                           ${isOffline ? `<p class="text-xs text-slate-400">离线</p>` : `<i class="ri-lightbulb-line ${device.isOn ? 'text-yellow-400' : 'text-slate-400'} text-xl"></i>`}
                        </div>
                        <p class="text-2xl font-semibold ${device.isOn ? 'text-slate-800' : 'text-slate-400'}">${device.isOn ? '已开启' : '已关闭'}</p>
                     `;
                }
                
                // 代码注释：修复了电源按钮的图标
                return `
                    <div class="${cardClasses}">
                        ${contentHTML}
                        <button data-id="${device.id}" data-type="${type}" class="power-btn w-10 h-10 rounded-full flex items-center justify-center self-end text-xl transition-all ${device.isOn ? 'bg-slate-800 text-white' : 'bg-slate-200 text-slate-700'}">
                            <i class="ri-power-line"></i>
                        </button>
                    </div>`;
            };

            const renderGrids = () => {
                grids.ac.innerHTML = acData.map(d => createDeviceCardHTML(d, 'ac')).join('');
                grids.light.innerHTML = lightData.map(d => createDeviceCardHTML(d, 'light')).join('');
            };
            
            const handlePowerClick = (e) => {
                const powerButton = e.target.closest('.power-btn');
                if (!powerButton) return;
                
                const { id, type } = powerButton.dataset;
                const dataArray = type === 'ac' ? acData : lightData;
                const device = dataArray.find(d => d.id === id);
                
                if (device) {
                    device.isOn = !device.isOn;
                    renderGrids(); // Re-render all grids to reflect state change
                }
            };

            grids.ac.addEventListener('click', handlePowerClick);
            grids.light.addEventListener('click', handlePowerClick);

            const switchTab = (activeTab) => {
                tabs.forEach(tab => {
                    const tabName = tab.dataset.tab;
                    const isActive = tabName === activeTab;
                    tab.classList.toggle('bg-white', isActive);
                    tab.classList.toggle('text-slate-800', isActive);
                    tab.classList.toggle('text-slate-500', !isActive);
                    grids[tabName].classList.toggle('hidden', !isActive);
                });
            };

            tabs.forEach(tab => tab.addEventListener('click', () => switchTab(tab.dataset.tab)));

            // Initial Render
            renderGrids();
            switchTab('ac');
        });
    </script>
</body>
</html>
